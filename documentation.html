<!DOCTYPE html>
<html class="wf-facitweb-n4-active wf-facitweb-i4-active wf-facitweb-n7-active wf-facitweb-i7-active wf-active"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" charset="utf-8">
  <meta name="description" content="Getting Started with ClojureScript.">
  <title>ClojureScript One Guide - Documentation</title>
  <link rel="stylesheet" href="documentation_files/uberdocs.css">
  <link rel="stylesheet" href="documentation_files/topbar.css">
  <link rel="stylesheet" href="documentation_files/fonts.css">
  <link rel="stylesheet" href="documentation_files/tab.css">
  <link rel="stylesheet" href="documentation_files/highlighter.css">
  <script src="documentation_files/uberdocs.js"></script>
  <script src="documentation_files/gkh4hon.js" type="text/javascript"></script>
  <style type="text/css">.tk-facitweb{font-family:"facitweb",sans-serif;}</style><link href="documentation_files/gkh4hon-d.css" rel="stylesheet"><script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <script charset="utf-8" type="text/javascript" src="documentation_files/one.js"></script>
  </head>

<body class="uberdocs">
  <div class="topbar">
      <a href="http://clojurescriptone.com/index.html" class="brand">ClojureScript One Guide</a>
      <ul class="nav" id="navigation">
        <li><a href="http://clojurescriptone.com/getting-started.html">Getting Started</a></li>
        <li class="active"><a href="http://clojurescriptone.com/documentation.html">Documentation</a></li>
      </ul>
  </div> <!-- /topbar -->

  <div id="github-tab-wrapper"><div id="github-tab"><a target="_new" href="https://github.com/brentonashworth/one"><img src="documentation_files/github-icon.png"></a><p>VIEW ON GITHUB Â»</p></div></div>

<!--- DO NOT EDIT BELOW THIS LINE // ONLY FOR PASTING NEW DOCS -->
  <!--
............................................                                            .  .   . .
........ ......................  ............ ...:,.   .        . .. .. .. .        . ........ ...
......   ..             . ...,$DDMD$ODI...  . .?N7IDZDM.. . ..  . ........ .. . ..  . ..............
......      ..  .  ..   ..,~ZO????????IOO8ZI~78I????I?IDO?:.      .                   .    ..  . .
......   .. ..  .  ..  .$OI??????7ZMDZDMI?7ZOMI?????I??I$ZDM    . .. .. .. .  .     . ........ ...
.... .      ..  ..  .,OD??????IZZ$D+?$7$OM?7Z$OZZI???????$Z$O..   .. .. .. .        . ........ ...
......     ..=$OONDMDO???????I$ZZDDM+:,~87M$ZZZZZZZZZZZZZZZZODDO?,.. .. .. ..      .. ........ ...
.......,+OO$7??????I77??????$88OZO8. IMM?D$ZZZZZZ7I?I?I7$777ZZ$I?IZO$,.....             . . .. .
.... ?NZI????????7ZZ$I???????+??I??OI.II,=DZMO7II??7$??????????I?????O8M888?..      . ............ .
...=DI?????????7ZZZ$$????????$7???O??8DDO$O???????????????????77+?II7??????IM7$I,.  . ..............
..M$?????????IZZZZDM????????ZZZ????MDZ$ZMD??I$?$I??III????????I?MD7I???I7I??????DM... ........ ....
IMI????????I$ZZZ$I??????????II$I?????I7I???IZZZ$?????ZZZ$????????777N$?????IZ$????DDD? .
???????????$ZZZ7????????????????II????7$ZZ7????????ZZ??????I?????????7??7MOZZZZZZZZZZ$N$I..... ...
???????????ZZZZ$?????????????????????????????????7ZZZZ$????????????$7????$OOMZZZZZZZZZZ$ZMO... .
??????????IZZZZI????????????????????????????????7ZZZZZZZZ$I???????I7I????II??D8ZZZZZZZZZZZO8=.......
?????????$$$8$?????????????????????????I$77777$ZZZZZZZZZZZZZ$I?????????ZI????I$$ZZZZZZZZZZZZZ$,.....
????IZ7?IZZMO?????????????7ZZ77???????????7$ZZZZZZZZZZZI??II??7????????????Z7???7ZZZZZZZZZZZZ$D.....
????$Z??IZ$DZ???????????????77I????????????????7ZZZZZZZZZZ7????????????????77?????????ZZZZZZZZ$M?...
????$???IZ$DZ?????????????????????????????????ZZZZZZZZZZZZZZ$?????????????????????$MM8?ZZZZZZZZZM:..
????????IZOZZ????????????????????????????II7ZZZZZZZZZZZZZZZ$I7I???????????????????I$MMM8ZZZZZZZ$D=..
????????IZZOZ??????????????????????7ZZZZZZZZZZZZZZZZZZZZZZZI??????I$Z$7I??????????Z7?7MM8ZZZZZZ$D=..
?????I$IIZ$OZ7???????????????????????$ZZZZZZZZZZZZZZZZZZZZZZ????????I??I??I$7?????7ZZZZZZZZZZZZ$D:..
??$7ZZ??7Z$8ZZ$?????????????????????7ZZZZZZZZZZZZZZZZZZZZ$ZI???????????????I?II???IZZZZZZZZZZZZZD,..
??Z$ZI??$ZZMZZZ$???????????????????$ZZZZZZZZZZZZZZZZZIIZ$IZI?????????????????????IZZZZZZZZZZZZZZD,..
??ZZ???ZZ$O$ZODMM8OZZ$I????$Z??$Z??IZZZZZZZZZZZZZZZZZ$?ZZIZZ$Z??Z7??$?????????????ZZZZZZZZZZZZZZM,..
?IZZ??ZZ$DDZZZZZZDD8MMOO$$ZZZZZZZI??$ZZZZZZZZZZZZZZZ$ZZZZZZZZZ??ZZ?IZ?????????????ZZZZZZZZZZZZZMI...
?7ZI??ZZDOZ$$ZZZZZDM$Z88DDM888Z$ZZZ$$$Z$ZZ88MMMMDMOMMM888OZO$$$$ZZ?Z$???ZI?7Z??I$IZZZZZZZZZ$$DM.....
?77??$ZNNZZ?7ZZZZZZZOZNDO88888888OD88888888888888DOD=DD=MZ.ZZ+NNZ8N8OOOZZ$7ZZZZZZZZZOO8O8DDI7O~.....
??I?$ZNO8$??$ZZZZZZZOM$$888888888888888888888888888MNDON8ZM8$.?I.+M:,M7..MO,$O~~$M,,OO..7O=?M~......
I?I?Z$DO8I?IZ$?7Z7??Z$OZDD8888888888888888888888888888M88MO$IO.O~ON.?=O.+7$=OI..O$.+?O.=Z8.OM.......
$???Z$OD8??IZ7??77???7MDZD8O88888888888888888888888888888Z,.M=,OO~I=O+O~M7+O,?.::I=O~O:M~$IM~ ......
Z$??$Z$DOI??Z?????????IOZZDNO888888888888888888888888888?.....:Z.,D+.O=D,DO..7IO,D?.I$$,.=~.........
IZ??7O7D8I??7I??????????MO$ON8888888888888888888888888O..............OM. ,...M=..: .OO..............
?7I?7DIO8$???$????????I?$M77OO88888888888888888888888$,............. :  .....  .....................
$?$?ZM?7NZ7??7Z???????$I?Z$I?M88888888888888888888888...............................................
D?ZIOD??D$Z???7ZI?????IZ??NZ?7MO8888888888888888888$:...............................................
$?ZZDDOIIDZ$???7Z7??????ZI$88??D8O88888D88888888888. ...............................................
$?Z$8?NZ?MDZ$????ZZZI???7ZZ$D??MD8888888M888888888~.................................................
$I$M??8D$?D$ZI?????$$I???7ZZZZ?7M88888888NO88888O:..................................................
Z$NZ$7?88I?N8$$?????ZI????$ZZNZ?788888NN88M88888I...................................................
ZZ7?$II?8Z$??DZ$I????I????I$ZZZ??M888888M8ON888$,...................................................
OMIZ7I?7IMOI?IM$ZI?????????IZZZ??7M888888M88NDO:..........................RAWR......................
8ZZZZ77?$?87I??M8Z7?????????$ZZ7??D8888OO8D88MI.....................................................
O?ZZOD$??$IZD7IZ$D8Z$I??????IZZZ7??MNODN8ODN88$7D...................................................
+?Z$ZD7$??Z??$ZZZZZM$Z$I?????ZZZZ??D+8O8MD8888OM+,? ................................................
$ZZZ7D?Z7??ZI?7$ZZ$$NDZZ?????$ZZZ$?7MDI:N888MD8MO7M.................................................
$IZZ????$??IZ??MZZZZZZ8$ZI????Z?7Z7?O+7NDMMD8888MI.IM,..............................................
$?7ZI???IZI??ZIIDOZZZZOM$ZI???I7?ZZ??NMO ~8888888MM~N...............................................
7???$III??$??DMMMMOZZZZZMDZZ7??$$?$I?ZI?NNMN8888OO8$I=..............................................
DO???I?ZI?IDMMMMDZOMDODM.+OZZ7??I?7$?IMO.~88DD88NO88N,... ..........................................
$8??????$?$MMMMM8ZZZZZZZ7.$M$Z7????ZMI7MMNMOMD888MDO8DMMO...........................................
?8??I7??INMMMMM8ODZZZZZZ8,.,8$Z????7OZ?$7+:O88DND88N888D8:.: .......................................
I+O???ZI8$ZMM8ZD8ZODDDDD?. ..M8ZI???$DI?8OMM$:$N8888OMD88DMO........................................
I?DO??7DO??I$ZZMZZZZZZZ$M? ...$$Z????$M7DM,.,ONN88888888888N,.......................................
Z7IM7?IM7???$ZZD8$$$Z$ZZOM.....MZ$????OM?M.?DNMMD88NMD8O8888M:......................................
?7I?NON$???$ONMDMMMMMMOOZD,....,Z$$????Z??MI:~N88888DON8NO888M......................................
?IZ7?OI???I87DMMMMMM8ZZZDM.. .. .MZI????M?Z8MDDON8888N:.?ZOMO= .....................................
7?ZZDD???DD?IDMMMMMDZZOOZ8,. .. .~MZ$???DD?Z$~$D8ODN88MMMO+O..~.....................................
777$Z??+8I???7ZDDODDZZZZZZ7. .....=7Z7?7?D??OI88N+=8888I.?O.$OO, ...................................
?Z$M??ODI??????+?DOZZZZZZZM~... . .MOZ$I77O?ZN?:.MD88O8NOMOO,O.. ...................................
I?8I?????????MO??N$ZZZZZZZD7 .. . ..+DZZZZOM$$MNNM$ON888M.~O=ON7 ...................................
ZID?????????8$Z??$MZZZZZZZN+... . .. $DZZZ$OZZOM,.IO8DM88MMM~~+. ...................................
Z$D????????8M$ZZ7?78DZZ$Z8?. .. .... .?M$ZZZD8$ODM8MO7D88$..OMM~....................................
77M7?????ZD??DNZZZ$7I7$8ZZZ. .. . ..   .O8ZZZZOZZN$:$8DZ$8ZODZ......................................
??DD??8DNZZZ7??MOZZZZZZZZZ8O... . ..   . .$M$ZOM8Z$MM..MI7MM.. .....................................
??OD??I$OOZZZZZ?DOZZZZZZZZOM:...............?MOZOD$Z$NMOM887........................................
??8$???$ZMZZZZZI?DZZZZZZZZZD~.. . ..   ..   ..,+OMMZZ$ZZ$OO,......:=??= ............................
??8?????$ZNZZZZZZ$OD8ZZZZZ8D... . ..   ..   ........:=?7?, ...IONMMMMO$?+...........................
?7MI?????$OOZZZZZZZZ$ODMDM$. .. . ..   ..   ...............=8Z????OM~...............................
$DMO?????$ZDZZZZZZZZZZZZZZOM~.. . ..   ..   .........,=+$DDI??????$D?...............................
$ZDM+????$$DZZZZZZZZZZZZZZZ$8. .. ..   ..   .......=M$I???????I7$ZZM=...............................
??$MDD???7$OZZZZZZZZZZZZZZZZOO  . ..   ..   .....IMI????I$ZZM8DMDMO$8:..............................
-->
<table><tbody><tr><td class="docs"><div class="header"><h1 class="project-name">one</h1><h2 class="project-version">1.0.0-SNAPSHOT</h2><br><p>Getting Started with ClojureScript.</p>
</div><div class="dependencies"><h3>dependencies</h3><table><tbody><tr><td class="dep-name">org.clojure/clojure</td><td class="dotted"><hr></td><td class="dep-version">1.3.0</td></tr><tr><td class="dep-name">ring</td><td class="dotted"><hr></td><td class="dep-version">1.0.0-RC1</td></tr><tr><td class="dep-name">compojure</td><td class="dotted"><hr></td><td class="dep-version">0.6.4</td></tr><tr><td class="dep-name">enlive</td><td class="dotted"><hr></td><td class="dep-version">1.0.0</td></tr><tr><td class="dep-name">org.mozilla/rhino</td><td class="dotted"><hr></td><td class="dep-version">1.7R3</td></tr><tr><td class="dep-name">com.google.javascript/closure-compiler</td><td class="dotted"><hr></td><td class="dep-version">r1592</td></tr><tr><td class="dep-name">org.clojure/google-closure-library</td><td class="dotted"><hr></td><td class="dep-version">0.0-790</td></tr></tbody></table></div><div class="dependencies"><h3>dev dependencies</h3><table><tbody><tr><td class="dep-name">jline</td><td class="dotted"><hr></td><td class="dep-version">0.9.94</td></tr><tr><td class="dep-name">marginalia</td><td class="dotted"><hr></td><td class="dep-version">0.7.0-SNAPSHOT</td></tr><tr><td class="dep-name">lein-marginalia</td><td class="dotted"><hr></td><td class="dep-version">0.7.0-SNAPSHOT</td></tr></tbody></table></div></td><td style="text-align: center; vertical-align: middle; color: rgb(102, 102, 102); padding-right: 20px;" class="codes"><br><br><br>(this space intentionally left almost blank)</td></tr><tr><td class="docs"><div class="toc"><a name="toc"></a><h3>namespaces</h3><ul><li><a href="#one.application">one.application</a></li><li><a href="#one.sample.api">one.sample.api</a></li><li><a href="#one.sample.prod-server">one.sample.prod-server</a></li><li><a href="#one.sample.repl">one.sample.repl</a></li><li><a href="#script.build">script.build</a></li><li><a href="#script.serve">script.serve</a></li><li><a href="#one.sample.snippets">one.sample.snippets</a></li><li><a href="#leiningen.bootstrap">leiningen.bootstrap</a></li><li><a href="#leiningen.git-deps">leiningen.git-deps</a></li><li><a href="#one.config">one.config</a></li><li><a href="#one.dev-server">one.dev-server</a></li><li><a href="#one.host-page">one.host-page</a></li><li><a href="#one.reload">one.reload</a></li><li><a href="#one.templates">one.templates</a></li><li><a href="#one.test">one.test</a></li><li><a href="#one.tools">one.tools</a></li><li><a href="#script.docs">script.docs</a></li><li><a href="#one.sample.animation">one.sample.animation</a></li><li><a href="#one.sample.controller">one.sample.controller</a></li><li><a href="#one.sample.core">one.sample.core</a></li><li><a href="#one.sample.history">one.sample.history</a></li><li><a href="#one.sample.logging">one.sample.logging</a></li><li><a href="#one.sample.model">one.sample.model</a></li><li><a href="#one.sample.view">one.sample.view</a></li><li><a href="#one.browser.animation">one.browser.animation</a></li><li><a href="#one.browser.history">one.browser.history</a></li><li><a href="#one.browser.remote">one.browser.remote</a></li><li><a href="#one.browser.repl-client">one.browser.repl-client</a></li><li><a href="#one.color">one.color</a></li><li><a href="#one.core">one.core</a></li><li><a href="#one.dispatch">one.dispatch</a></li><li><a href="#one.logging">one.logging</a></li></ul></div></td><td class="codes">&nbsp;</td></tr><tr><td class="docs"><div class="docs-header"><a name="one.application" href="#one.application" class="anchor"></a><h1 class="project-name">one.application</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>This namespace contains the configuration for a ClojureScript One
  application. Every 'One' application must have a <code>one.application</code>
  namespace with a valid configuration.</p>
</td><td class="codes"><div><div id="highlighter_462413" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.application</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.sample.api</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">remote-routes</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">net.cgrand.enlive-html</code> <code class="clojure constants">:as</code> <code class="clojure symbol">html</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_886033" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">production-transform</code> <code class="clojure keyword">[</code><code class="clojure variable">h</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/transform</code> <code class="clojure variable">h</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure constants">:ul#navigation</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/substitute</code> <code class="clojure plain">(</code><code class="clojure functions">html/html-snippet</code> <code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Configuration for the sample application.</p>
</td><td class="codes"><div><div id="highlighter_632948" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">config</code> <code class="clojure keyword">{</code><code class="clojure constants">:src-root</code> <code class="clojure string">"src"</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:app-root</code> <code class="clojure string">"src/app/cljs"</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:top-level-package</code> <code class="clojure string">"one"</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:js</code> <code class="clojure string">"public/javascripts"</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:dev-js-file-name</code> <code class="clojure string">"main.js"</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:prod-js-file-name</code> <code class="clojure string">"mainp.js"</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:dev-js</code> <code class="clojure keyword">[</code><code class="clojure string">"goog.require('one.sample.core');"</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"goog.require('one.sample.model');"</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"goog.require('one.sample.controller');"</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"goog.require('one.sample.history');"</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"goog.require('one.sample.logging');"</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"one.sample.core.start();one.sample.core.repl();"</code><code class="clojure keyword">]</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:prod-js</code> <code class="clojure keyword">[</code><code class="clojure string">"one.sample.core.start();"</code><code class="clojure keyword">]</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:reload-clj</code> <code class="clojure keyword">[</code><code class="clojure string">"/one/host_page"</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"/one/reload"</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"/one/templates"</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"/one/sample/api"</code></div><div class="line number19 index18 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"/one/application"</code></div><div class="line number20 index19 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"/one/dev_server"</code><code class="clojure keyword">]</code></div><div class="line number21 index20 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:prod-transform</code> <code class="clojure symbol">production-transform</code></div><div class="line number22 index21 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:api-routes</code> <code class="clojure symbol">remote-routes</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.api" href="#one.sample.api" class="anchor"></a><h1 class="project-name">one.sample.api</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>The server side of the sample application. Provides a simple API for
  updating an in-memory database.</p>
</td><td class="codes"><div><div id="highlighter_971449" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.sample.api</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">compojure.core</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">defroutes</code> <code class="clojure color3">POST</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_776627" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defonce</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code> <code class="clojure symbol">next-id</code> <code class="clojure plain">(</code><code class="clojure functions">atom</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_291538" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defonce</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:dynamic</code> <code class="clojure symbol">*database*</code> <code class="clojure plain">(</code><code class="clojure functions">atom</code> <code class="clojure keyword">#{</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Multimethod to handle incoming API calls. Implementations are
  selected based on the :fn key in the data sent by the client.
  Implementation are called with whatever data struture the client
  sends (which will already have been read into a Clojure value) and
  can return any Clojure value. The value the implementation returns
  will be serialized to a string before being sent back to the client.</p>
</td><td class="codes"><div><div id="highlighter_587161" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure symbol">remote</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure constants">:fn</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_419090" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">remote</code> <code class="clojure constants">:default</code> <code class="clojure keyword">[</code><code class="clojure variable">data</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:error</code> <code class="clojure constants">:message</code> <code class="clojure string">"Unknown endpoint."</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_387294" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">remote</code> <code class="clojure constants">:add-name</code> <code class="clojure keyword">[</code><code class="clojure variable">data</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">n</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">data</code> <code class="clojure constants">:args</code> <code class="clojure constants">:name</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">response</code> <code class="clojure keyword">{</code><code class="clojure constants">:exists</code> <code class="clojure plain">(</code><code class="clojure functions">contains?</code> <code class="clojure plain">@</code><code class="clojure symbol">*database*</code> <code class="clojure variable">n</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">*database*</code> <code class="clojure symbol">conj</code> <code class="clojure variable">n</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">response</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_881981" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defroutes</code> <code class="clojure symbol">remote-routes</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">POST</code> <code class="clojure string">"/remote"</code> <code class="clojure keyword">{</code><code class="clojure keyword">{</code><code class="clojure symbol">data</code> <code class="clojure string">"data"</code><code class="clojure keyword">}</code> <code class="clojure constants">:params</code><code class="clojure keyword">}</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">pr-str</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">remote</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">binding</code> <code class="clojure keyword">[</code><code class="clojure variable">*read-eval*</code> <code class="clojure value">false</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">read-string</code> <code class="clojure symbol">data</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.prod-server" href="#one.sample.prod-server" class="anchor"></a><h1 class="project-name">one.sample.prod-server</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Production server serves the backend API. This is only required if
  there is a backend API.</p>
</td><td class="codes"><div><div id="highlighter_181874" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.sample.prod-server</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">ring.adapter.jetty</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">run-jetty</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.middleware.file</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">wrap-file</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.middleware.file-info</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">wrap-file-info</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.middleware.params</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">wrap-params</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.util.response</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">file-response</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">compojure.core</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">defroutes</code> <code class="clojure color3">ANY</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.sample.api</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">remote-routes</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_703820" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code> <code class="clojure symbol">root</code> <code class="clojure string">"out/public"</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>HACK: Something about the defroutes below requires that the
out/public directory exist, or we get a compile error.</p>
</td><td class="codes"><div><div id="highlighter_784449" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure color1">.mkdirs</code> <code class="clojure plain">(</code><code class="clojure color1">java.io.File.</code> <code class="clojure string">"out/public"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_111687" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defroutes</code> <code class="clojure symbol">app-routes</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">remote-routes</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure plain">(</code><code class="clojure functions">ANY</code> <code class="clojure string">"*"</code> <code class="clojure symbol">request</code> <code class="clojure plain">(</code><code class="clojure functions">file-response</code> <code class="clojure string">"404.html"</code> <code class="clojure keyword">{</code><code class="clojure constants">:root</code> <code class="clojure symbol">root</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">wrap-file</code> <code class="clojure symbol">root</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">wrap-file-info</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_168742" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code> <code class="clojure symbol">app</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure symbol">app-routes</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">wrap-params</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_261918" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">run-server</code> <code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">port</code> <code class="clojure plain">(</code><code class="clojure color1">Integer/parseInt</code> <code class="clojure plain">(</code><code class="clojure functions">get</code> <code class="clojure plain">(</code><code class="clojure color1">System/getenv</code><code class="clojure plain">)</code> <code class="clojure string">"PORT"</code> <code class="clojure string">"8080"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">run-jetty</code> <code class="clojure plain">(</code><code class="clojure functions">var</code> <code class="clojure symbol">app</code><code class="clojure plain">)</code> <code class="clojure keyword">{</code><code class="clojure constants">:join?</code> <code class="clojure value">false</code> <code class="clojure constants">:port</code> <code class="clojure variable">port</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.repl" href="#one.sample.repl" class="anchor"></a><h1 class="project-name">one.sample.repl</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>The starting namespace for the project. This is the namespace that
  users will land in when they start a Clojure REPL. It exists to
  provide convenience functions like 'go' and 'dev-server'.</p>
</td><td class="codes"><div><div id="highlighter_416987" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.sample.repl</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">clojure.repl</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.tools</code> <code class="clojure constants">:as</code> <code class="clojure symbol">tools</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.dev-server</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dev</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.java.browse</code> <code class="clojure constants">:as</code> <code class="clojure symbol">browse</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Start a browser-connected REPL and launch a browser to talk to it.</p>
</td><td class="codes"><div><div id="highlighter_815614" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">go</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dev/run-server</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">future</code> <code class="clojure plain">(</code><code class="clojure color1">Thread/sleep</code> <code class="clojure value">3000</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">browse/browse-url</code> <code class="clojure string">"<a href="http://localhost:8080/development">http://localhost:8080/development</a>"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">tools/cljs-repl</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Start the development server and open the host application in the
  default browser.</p>
</td><td class="codes"><div><div id="highlighter_125129" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">dev-server</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dev/run-server</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">future</code> <code class="clojure plain">(</code><code class="clojure color1">Thread/sleep</code> <code class="clojure value">3000</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">browse/browse-url</code> <code class="clojure string">"<a href="http://localhost:8080/">http://localhost:8080</a>"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Start a ClojureScript REPL.</p>

<p>This is a convenience function so that people can start a CLJS REPL
without having to type in (tools/cljs-repl)</p>
</td><td class="codes"><div><div id="highlighter_783909" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">cljs-repl</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">tools/cljs-repl</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_205519" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">println</code><code class="clojure plain">)</code></div><div class="line number2 index1 alt1"><code class="clojure plain">(</code><code class="clojure functions">println</code> <code class="clojure string">"Type (go) to launch the development server and setup a browser-connected REPL."</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure plain">(</code><code class="clojure functions">println</code> <code class="clojure string">"Type (dev-server) to launch only the development server."</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure plain">(</code><code class="clojure functions">println</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="script.build" href="#script.build" class="anchor"></a><h1 class="project-name">script.build</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Contains a -main function which builds the production artifacts for
  the project.</p>
</td><td class="codes"><div><div id="highlighter_904697" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">script.build</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">clojure.java.io</code> <code class="clojure constants">:as</code> <code class="clojure symbol">io</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.tools</code> <code class="clojure constants">:as</code> <code class="clojure symbol">tools</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.application</code> <code class="clojure constants">:as</code> <code class="clojure symbol">config</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Compile ClojureScript sources and output them as well as all static
  resources to the out/public directory.</p>
</td><td class="codes"><div><div id="highlighter_979245" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">-main</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">println</code> <code class="clojure string">"Creating out/public..."</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.mkdir</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure string">"out"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">tools/copy-recursive-into</code> <code class="clojure string">"public"</code> <code class="clojure string">"out"</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">tools/delete</code> <code class="clojure string">"out/public/index.html"</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"out/public/design.html"</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"out/public/javascripts"</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.mkdir</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure string">"out/public/javascripts"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">println</code> <code class="clojure string">"Create advanced compiled JavaScript..."</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">tools/build-project</code> <code class="clojure symbol">config/config</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="script.serve" href="#script.serve" class="anchor"></a><h1 class="project-name">script.serve</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Provides a -main function which will start the production server.</p>
</td><td class="codes"><div><div id="highlighter_630991" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">script.serve</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.sample.prod-server</code> <code class="clojure constants">:as</code> <code class="clojure symbol">prod</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Start the production server which serves the content from
  out/public as well as the sample application's API.</p>
</td><td class="codes"><div><div id="highlighter_754140" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">-main</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">prod/run-server</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.snippets" href="#one.sample.snippets" class="anchor"></a><h1 class="project-name">one.sample.snippets</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Macros for including HTML snippets in the ClojureScript application
  at compile time.</p>
</td><td class="codes"><div><div id="highlighter_658240" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.sample.snippets</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.templates</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">render</code> <code class="clojure symbol">construct-html</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">net.cgrand.enlive-html</code> <code class="clojure constants">:as</code> <code class="clojure symbol">html</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_675303" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">snippet</code> <code class="clojure keyword">[</code><code class="clojure variable">file</code> <code class="clojure variable">id</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">render</code> <code class="clojure plain">(</code><code class="clojure functions">html/select</code> <code class="clojure plain">(</code><code class="clojure functions">construct-html</code> <code class="clojure plain">(</code><code class="clojure functions">html/html-resource</code> <code class="clojure variable">file</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure variable">id</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Expands to a map of HTML snippets which are extracted from the
  design templates.</p>
</td><td class="codes"><div><div id="highlighter_423538" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmacro</code> <code class="clojure symbol">snippets</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:form</code> <code class="clojure plain">(</code><code class="clojure functions">snippet</code> <code class="clojure string">"form.html"</code> <code class="clojure keyword">[</code><code class="clojure constants">:div#form</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:greeting</code> <code class="clojure plain">(</code><code class="clojure functions">snippet</code> <code class="clojure string">"greeting.html"</code> <code class="clojure keyword">[</code><code class="clojure constants">:div#greeting</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="leiningen.bootstrap" href="#leiningen.bootstrap" class="anchor"></a><h1 class="project-name">leiningen.bootstrap</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Bootstrap the project by running lein deps and lein git-deps.</p>
</td><td class="codes"><div><div id="highlighter_150413" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">leiningen.bootstrap</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">leiningen.git-deps</code> <code class="clojure constants">:only</code> <code class="clojure keyword">[</code><code class="clojure symbol">git-deps</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">leiningen.core</code> <code class="clojure constants">:only</code> <code class="clojure keyword">[</code><code class="clojure symbol">default-repos</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">leiningen.deps</code> <code class="clojure constants">:only</code> <code class="clojure keyword">[</code><code class="clojure symbol">deps</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">leiningen.util.maven</code> <code class="clojure constants">:only</code> <code class="clojure keyword">[</code><code class="clojure symbol">container</code> <code class="clojure symbol">make-remote-artifact</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">make-remote-repo</code> <code class="clojure symbol">make-local-repo</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:import</code> <code class="clojure plain">(</code><code class="clojure functions">org.apache.maven.artifact.resolver</code> <code class="clojure color3">ArtifactResolver</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>There is a bug in Leiningen 1.6.2 which requires that you have
Clojure 1.2.1 in the local maven repository when you are working on a
Clojure 1.3 project. If the first project that someone works on
with Leiningen is a Clojure 1.3 based project then they will
encounter this problem.</p>
</td><td class="codes"></td></tr><tr><td class="docs"><p>A lot of people have run into this with ClojureScript One so we
have added a workaround.</p>
</td><td class="codes"></td></tr><tr><td class="docs"><p>Leiningen includes an <code>install</code> task which, for some unknown reason,
takes a long time to run. Below, we have extracted just the part
of that task that we need to get a dependency from a maven repository.</p>
</td><td class="codes"></td></tr><tr><td class="docs"><p>Download a dependency from a maven repository.</p>
</td><td class="codes"><div><div id="highlighter_631826" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">standalone-download</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">name</code> <code class="clojure variable">group</code> <code class="clojure variable">version</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.resolveAlways</code> <code class="clojure plain">(</code><code class="clojure color1">.lookup</code> <code class="clojure symbol">container</code> <code class="clojure constants">ArtifactResolver/ROLE</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">make-remote-artifact</code> <code class="clojure variable">name</code> <code class="clojure variable">group</code> <code class="clojure variable">version</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure symbol">make-remote-repo</code> <code class="clojure symbol">default-repos</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">make-local-repo</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Bootstrap the project by running lein deps and lein git-deps.</p>
</td><td class="codes"><div><div id="highlighter_182964" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">bootstrap</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">project</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; Workarond for Leiningen 1.6.2 bug. Ensure that we have Clojure 1.2.1 in</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; the local maven repository.</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">standalone-download</code> <code class="clojure string">"clojure"</code> <code class="clojure string">"org.clojure"</code> <code class="clojure string">"1.2.1"</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">git-deps</code> <code class="clojure variable">project</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">deps</code> <code class="clojure variable">project</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="leiningen.git-deps" href="#leiningen.git-deps" class="anchor"></a><h1 class="project-name">leiningen.git-deps</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>How this works: It clones projects into .lein-git-deps/<whatever>.
  If the directory already exists, it does a git pull and git checkout.</whatever></p>
</td><td class="codes"><div><div id="highlighter_138991" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">leiningen.git-deps</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">clojure.java.shell</code> <code class="clojure constants">:as</code> <code class="clojure symbol">sh</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.java.io</code> <code class="clojure constants">:as</code> <code class="clojure symbol">io</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.string</code> <code class="clojure constants">:as</code> <code class="clojure symbol">string</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>The directory into which dependencies will be cloned.</p>
</td><td class="codes"><div><div id="highlighter_286846" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure keyword meta">{</code><code class="clojure constants meta">:private</code> <code class="clojure value meta">true</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants meta">:doc</code> <code class="clojure keyword meta">}</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">git-deps-dir</code> <code class="clojure string">".lein-git-deps"</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Return true if the specified directory exists.</p>
</td><td class="codes"><div><div id="highlighter_313453" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">directory-exists?</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">dir</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.isDirectory</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a git URL, return the directory it would clone into by default.</p>
</td><td class="codes"><div><div id="highlighter_552379" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">default-clone-dir</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">uri</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">string/join</code> <code class="clojure string">"."</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">uri</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">string/split</code> <code class="clojure string">#"/"</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">last</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">string/split</code> <code class="clojure string">#"\."</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">butlast</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Run a command, throwing an exception if it fails, returning the
  result as with clojure.java.shell/sh.</p>
</td><td class="codes"><div><div id="highlighter_748839" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">exec</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">&amp;</code> <code class="clojure variable">args</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">exit</code> <code class="clojure variable">out</code> <code class="clojure variable">err</code><code class="clojure keyword">]</code> <code class="clojure constants">:as</code> <code class="clojure symbol">result</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">sh/sh</code> <code class="clojure variable">args</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">zero?</code> <code class="clojure variable">exit</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">result</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">throw</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Exception.</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">format</code> <code class="clojure string">"Command %s failed with exit code %s\n%s\n%s"</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">str</code> <code class="clojure plain">(</code><code class="clojure functions">interpose</code> <code class="clojure string">" "</code> <code class="clojure variable">args</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">exit</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">out</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">err</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Clone the git repository at url into dir-name while working in
  directory working-dir.</p>
</td><td class="codes"><div><div id="highlighter_837292" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">git-clone</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">url</code> <code class="clojure variable">dir-name</code> <code class="clojure variable">working-dir</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">exec</code> <code class="clojure plain">(</code><code class="clojure functions">remove</code> <code class="clojure symbol">nil?</code> <code class="clojure keyword">[</code><code class="clojure string">"git"</code> <code class="clojure string">"clone"</code> <code class="clojure variable">url</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure variable">dir-name</code><code class="clojure plain">)</code> <code class="clojure constants">:dir</code> <code class="clojure variable">working-dir</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Check out the specified commit in dir.</p>
</td><td class="codes"><div><div id="highlighter_181145" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">git-checkout</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">commit</code> <code class="clojure variable">dir</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">println</code> <code class="clojure string">"Running git checkout "</code> <code class="clojure variable">commit</code> <code class="clojure string">" in "</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">exec</code> <code class="clojure string">"git"</code> <code class="clojure string">"checkout"</code> <code class="clojure variable">commit</code> <code class="clojure constants">:dir</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Return true if the git repository in dir has HEAD detached.</p>
</td><td class="codes"><div><div id="highlighter_869489" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">detached-head?</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">dir</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure variable">out</code> <code class="clojure constants">:out</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">exec</code> <code class="clojure string">"git"</code> <code class="clojure string">"branch"</code> <code class="clojure string">"--no-color"</code> <code class="clojure constants">:dir</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">lines</code> <code class="clojure plain">(</code><code class="clojure functions">string/split-lines</code> <code class="clojure variable">out</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">current-branch</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure plain">(</code><code class="clojure functions">filter</code> <code class="clojure plain">#(</code><code class="clojure color1">.startsWith</code> <code class="clojure symbol">%</code> <code class="clojure string">"*"</code><code class="clojure plain">)</code> <code class="clojure variable">lines</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when-not</code> <code class="clojure variable">current-branch</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">throw</code> <code class="clojure plain">(</code><code class="clojure color1">Exception.</code> <code class="clojure string">"Unable to determine current branch"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure variable">current-branch</code> <code class="clojure string">"* (no branch)"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Run 'git-pull' in directory dir, but only if we're on a branch. If
  HEAD is detached, we only do a fetch, not a full pull.</p>
</td><td class="codes"><div><div id="highlighter_22994" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">git-pull</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">dir</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">println</code> <code class="clojure string">"Running git pull on "</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">detached-head?</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">do</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">println</code> <code class="clojure string">"Not on a branch, so fetching instead of pulling."</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">exec</code> <code class="clojure string">"git"</code> <code class="clojure string">"fetch"</code> <code class="clojure constants">:dir</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">exec</code> <code class="clojure string">"git"</code> <code class="clojure string">"pull"</code> <code class="clojure constants">:dir</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>A leiningen task that will pull dependencies in via git.</p>

<p>  Dependencies should be listed in project.clj under the
  :git-dependencies key in one of these three forms:</p>

<pre><code>:git-dependencies [;; First form: just a URL.
                   ["https://github.com/foo/bar.git"]

                   ;; Second form: A URL and a ref, which can be anything
                   ;; you can specify for 'git checkout', like a commit id
                   ;; or a branch name.
                   ["https://github.com/foo/baz.git"
                    "329708b"]

                   ;; Third form: A URL, a commit, and a map
                   ["https://github.com/foo/quux.git"
                    "some-branch"
                    {:dir "alternate-directory"}]]
</code></pre>
</td><td class="codes"><div><div id="highlighter_378188" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">git-deps</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">project</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when-not</code> <code class="clojure plain">(</code><code class="clojure functions">directory-exists?</code> <code class="clojure symbol">git-deps-dir</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.mkdir</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure symbol">git-deps-dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">dep</code> <code class="clojure plain">(</code><code class="clojure functions">:git-dependencies</code> <code class="clojure variable">project</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">println</code> <code class="clojure string">"Setting up dependency for "</code> <code class="clojure variable">dep</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">dep-url</code> <code class="clojure variable">commit</code> <code class="clojure keyword">{</code><code class="clojure variable">clone-dir-name</code> <code class="clojure constants">:dir</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code> <code class="clojure variable">dep</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">commit</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure variable">commit</code> <code class="clojure string">"master"</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">clone-dir-name</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure variable">clone-dir-name</code> <code class="clojure plain">(</code><code class="clojure functions">default-clone-dir</code> <code class="clojure variable">dep-url</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">clone-dir</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure symbol">git-deps-dir</code> <code class="clojure variable">clone-dir-name</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">directory-exists?</code> <code class="clojure variable">clone-dir</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">git-pull</code> <code class="clojure variable">clone-dir</code><code class="clojure plain">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">git-clone</code> <code class="clojure variable">dep-url</code> <code class="clojure variable">clone-dir-name</code> <code class="clojure symbol">git-deps-dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">git-checkout</code> <code class="clojure variable">commit</code> <code class="clojure variable">clone-dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.config" href="#one.config" class="anchor"></a><h1 class="project-name">one.config</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Convenience functions for working with configuration data.</p>
</td><td class="codes"><div><div id="highlighter_742005" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.config</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a configuration map, return output directory options.</p>
</td><td class="codes"><div><div id="highlighter_775787" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">cljs-build-opts</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">config</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:output-to</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">:js</code> <code class="clojure variable">config</code><code class="clojure plain">)</code> <code class="clojure string">"/"</code> <code class="clojure plain">(</code><code class="clojure functions">:dev-js-file-name</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:output-dir</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">:js</code> <code class="clojure variable">config</code><code class="clojure plain">)</code> <code class="clojure string">"/out"</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:libs</code> <code class="clojure plain">(</code><code class="clojure functions">:libs</code> <code class="clojure variable">config</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:externs</code> <code class="clojure plain">(</code><code class="clojure functions">:externs</code> <code class="clojure variable">config</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:foreign-libs</code> <code class="clojure plain">(</code><code class="clojure functions">:foreign-libs</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a configuration map, return the path to the production
  Javascript file.</p>
</td><td class="codes"><div><div id="highlighter_634802" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">production-js</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">config</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">:js</code> <code class="clojure variable">config</code><code class="clojure plain">)</code> <code class="clojure string">"/"</code> <code class="clojure plain">(</code><code class="clojure functions">:prod-js-file-name</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.dev-server" href="#one.dev-server" class="anchor"></a><h1 class="project-name">one.dev-server</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Serve a friendly ClojureScript environment with code reloading and
   the ClojureScript application in both development and advanced
   compiled mode.</p>
</td><td class="codes"><div><div id="highlighter_657226" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.dev-server</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">ring.adapter.jetty</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">run-jetty</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.middleware.file</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">wrap-file</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.middleware.file-info</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">wrap-file-info</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.middleware.params</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">wrap-params</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.middleware.stacktrace</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">wrap-stacktrace</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">ring.util.response</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">file-response</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">compojure.core</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">defroutes</code> <code class="clojure color3">GET</code> <code class="clojure color3">POST</code> <code class="clojure color3">ANY</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">cljs.repl</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">repl</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">cljs.repl.browser</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">repl-env</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.templates</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">load-html</code> <code class="clojure symbol">apply-templates</code> <code class="clojure symbol">render</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.host-page</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">application-host</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.application</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">net.cgrand.enlive-html</code> <code class="clojure constants">:as</code> <code class="clojure symbol">html</code><code class="clojure keyword">]</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.reload</code> <code class="clojure constants">:as</code> <code class="clojure symbol">reload</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:import</code> <code class="clojure color3">java.io.File</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_465713" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">environment</code> <code class="clojure keyword">[</code><code class="clojure variable">uri</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">case</code> <code class="clojure variable">uri</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"/development"</code> <code class="clojure constants">:development</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"/production"</code> <code class="clojure constants">:production</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"/fresh"</code> <code class="clojure constants">:fresh</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_682581" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">make-host-page</code> <code class="clojure keyword">[</code><code class="clojure variable">request</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure value">200</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:headers</code> <code class="clojure keyword">{</code><code class="clojure string">"Content-Type"</code> <code class="clojure string">"text/html; charset=utf-8"</code><code class="clojure keyword">}</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:body</code> <code class="clojure plain">(</code><code class="clojure functions">application-host</code> <code class="clojure symbol">config</code> <code class="clojure plain">(</code><code class="clojure functions">environment</code> <code class="clojure plain">(</code><code class="clojure functions">:uri</code> <code class="clojure variable">request</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_111001" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defroutes</code> <code class="clojure symbol">app-routes</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:api-routes</code> <code class="clojure symbol">config</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">GET</code> <code class="clojure string">"/development"</code> <code class="clojure symbol">request</code> <code class="clojure plain">(</code><code class="clojure functions">make-host-page</code> <code class="clojure symbol">request</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">GET</code> <code class="clojure string">"/production"</code> <code class="clojure symbol">request</code> <code class="clojure plain">(</code><code class="clojure functions">make-host-page</code> <code class="clojure symbol">request</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">GET</code> <code class="clojure string">"/fresh"</code> <code class="clojure symbol">request</code> <code class="clojure plain">(</code><code class="clojure functions">make-host-page</code> <code class="clojure symbol">request</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">GET</code> <code class="clojure string">"/design*"</code> <code class="clojure keyword">{</code><code class="clojure keyword">{</code><code class="clojure symbol">file</code> <code class="clojure constants">:*</code><code class="clojure keyword">}</code> <code class="clojure constants">:route-params</code><code class="clojure keyword">}</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure plain">(</code><code class="clojure color1">.endsWith</code> <code class="clojure symbol">file</code> <code class="clojure string">".html"</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">load-html</code> <code class="clojure plain">(</code><code class="clojure color1">.substring</code> <code class="clojure symbol">file</code> <code class="clojure value">1</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">ANY</code> <code class="clojure string">"*"</code> <code class="clojure symbol">request</code> <code class="clojure plain">(</code><code class="clojure functions">file-response</code> <code class="clojure string">"404.html"</code> <code class="clojure keyword">{</code><code class="clojure constants">:root</code> <code class="clojure string">"public"</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_680980" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">js-encoding</code> <code class="clojure keyword">[</code><code class="clojure variable">handler</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">request</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">headers</code> <code class="clojure variable">body</code><code class="clojure keyword">]</code> <code class="clojure constants">:as</code> <code class="clojure symbol">response</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">handler</code> <code class="clojure variable">request</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">and</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">get</code> <code class="clojure variable">headers</code> <code class="clojure string">"Content-Type"</code><code class="clojure plain">)</code> <code class="clojure string">"text/javascript"</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">type</code> <code class="clojure variable">body</code><code class="clojure plain">)</code> <code class="clojure color3">File</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc-in</code> <code class="clojure symbol">response</code> <code class="clojure keyword">[</code><code class="clojure constants">:headers</code> <code class="clojure string">"Content-Type"</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"text/javascript; charset=utf-8"</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">response</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_264724" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">rewrite-design-uris</code> <code class="clojure keyword">[</code><code class="clojure variable">handler</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">uri</code><code class="clojure keyword">]</code> <code class="clojure constants">:as</code> <code class="clojure symbol">request</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">some</code> <code class="clojure symbol">true?</code> <code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure plain">#(</code><code class="clojure color1">.startsWith</code> <code class="clojure variable">uri</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"/design/"</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure string">"css"</code> <code class="clojure string">"javascripts"</code> <code class="clojure string">"images"</code> <code class="clojure string">"js"</code> <code class="clojure string">"favicon.ico"</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">handler</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure symbol">request</code> <code class="clojure constants">:uri</code> <code class="clojure plain">(</code><code class="clojure color1">.substring</code> <code class="clojure variable">uri</code> <code class="clojure value">7</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">handler</code> <code class="clojure symbol">request</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Parse a string into a seq of Enlive nodes.</p>

<p>We need to use this instead of Enlive's html-snippet, because
html-snippet throws away the doctype</p>
</td><td class="codes"><div><div id="highlighter_931866" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">html-parse</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">s</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/html-resource</code> <code class="clojure plain">(</code><code class="clojure color1">java.io.StringReader.</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts the selected menu (a keyword) and the response and returns
  an updated response body with the correct menu activated.</p>
</td><td class="codes"><div><div id="highlighter_488369" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">active-menu-transform</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">menu</code> <code class="clojure variable">response</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">response</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:body</code> <code class="clojure plain">(</code><code class="clojure functions">render</code> <code class="clojure plain">(</code><code class="clojure functions">html/transform</code> <code class="clojure plain">(</code><code class="clojure functions">html-parse</code> <code class="clojure plain">(</code><code class="clojure functions">:body</code> <code class="clojure variable">response</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure constants">:ul#navigation</code> <code class="clojure plain">(</code><code class="clojure functions">keyword</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"li."</code> <code class="clojure plain">(</code><code class="clojure functions">name</code> <code class="clojure variable">menu</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/add-class</code> <code class="clojure string">"active"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Middleware which will highlight the current active menu item.</p>
</td><td class="codes"><div><div id="highlighter_118246" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">set-active-menu</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">handler</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">request</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">response</code> <code class="clojure plain">(</code><code class="clojure functions">handler</code> <code class="clojure variable">request</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">uri</code> <code class="clojure plain">(</code><code class="clojure functions">:uri</code> <code class="clojure variable">request</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">cond</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure variable">uri</code> <code class="clojure string">"/"</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">active-menu-transform</code> <code class="clojure constants">:home</code> <code class="clojure variable">response</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">and</code> <code class="clojure plain">(</code><code class="clojure color1">.startsWith</code> <code class="clojure variable">uri</code> <code class="clojure string">"/design"</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure color1">.endsWith</code> <code class="clojure variable">uri</code> <code class="clojure string">".html"</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">active-menu-transform</code> <code class="clojure constants">:design</code> <code class="clojure variable">response</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure variable">uri</code> <code class="clojure string">"/development"</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">active-menu-transform</code> <code class="clojure constants">:development</code> <code class="clojure variable">response</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure variable">uri</code> <code class="clojure string">"/production"</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">active-menu-transform</code> <code class="clojure constants">:production</code> <code class="clojure variable">response</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:else</code> <code class="clojure variable">response</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_318922" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code> <code class="clojure symbol">app</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure symbol">app-routes</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">reload/watch-cljs</code> <code class="clojure symbol">config</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">wrap-file</code> <code class="clojure string">"public"</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">rewrite-design-uris</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">wrap-file-info</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">apply-templates</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">js-encoding</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">wrap-params</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">set-active-menu</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">wrap-stacktrace</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">reload/reload-clj</code> <code class="clojure plain">(</code><code class="clojure functions">:reload-clj</code> <code class="clojure symbol">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Start the development server on port 8080.</p>
</td><td class="codes"><div><div id="highlighter_934224" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">run-server</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">run-jetty</code> <code class="clojure plain">(</code><code class="clojure functions">var</code> <code class="clojure symbol">app</code><code class="clojure plain">)</code> <code class="clojure keyword">{</code><code class="clojure constants">:join?</code> <code class="clojure value">false</code> <code class="clojure constants">:port</code> <code class="clojure value">8080</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.host-page" href="#one.host-page" class="anchor"></a><h1 class="project-name">one.host-page</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Functions to create an HTML page that hosts a ClojureScript
  application.</p>
</td><td class="codes"><div><div id="highlighter_762415" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.host-page</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.templates</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">construct-html</code> <code class="clojure symbol">render</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">net.cgrand.enlive-html</code> <code class="clojure constants">:as</code> <code class="clojure symbol">html</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_497256" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code> <code class="clojure symbol">script-snippet</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/html-snippet</code> <code class="clojure string">"&lt;script type='text/javascript'&gt;&lt;/script&gt;"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_594246" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">script</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">f</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/transform</code> <code class="clojure symbol">script-snippet</code> <code class="clojure keyword">[</code><code class="clojure constants">:script</code><code class="clojure keyword">]</code> <code class="clojure variable">f</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_748759" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">application-view</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">&amp;</code> <code class="clojure variable">scripts</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/transform</code> <code class="clojure plain">(</code><code class="clojure functions">construct-html</code> <code class="clojure plain">(</code><code class="clojure functions">html/html-resource</code> <code class="clojure string">"application.html"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure constants">:body</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">html/append</code> <code class="clojure variable">scripts</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a configuration map and an environment, return HTML (as a
  string) that can host a ClojureScript application. The environment
  must be either <code>:development</code> or <code>:production</code> - any other value results
  in an exception. The generated HTML is based on the contents of
  application.html, which is loaded as an Enlive resource.</p>

<p>  In production mode, the HTML (as a sequence of Enlive nodes) is
  transformed via the <code>:prod-transform</code> function from the config map.</p>

<p>  This function is normally called in two situations:</p>

<ol>
<li><p>From a Ring application to dynamically generate the application
 HTML.</p></li>
<li><p>From the build script to create static deployment artifacts.</p></li>
</ol>
</td><td class="codes"><div><div id="highlighter_343353" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">application-host</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">config</code> <code class="clojure variable">environment</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">render</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">case</code> <code class="clojure variable">environment</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:development</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">application-view</code> <code class="clojure plain">(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/set-attr</code> <code class="clojure constants">:src</code> <code class="clojure string">"javascripts/out/goog/base.js"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/set-attr</code> <code class="clojure constants">:src</code> <code class="clojure string">"javascripts/main.js"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure plain">#(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/content</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">:dev-js</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:production</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">tfn</code> <code class="clojure plain">(</code><code class="clojure functions">get</code> <code class="clojure variable">config</code> <code class="clojure constants">:prod-transform</code> <code class="clojure symbol">identity</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">tfn</code> <code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">application-view</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/set-attr</code> <code class="clojure constants">:src</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"javascripts/"</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:prod-js-file-name</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure plain">#(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/content</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">:prod-js</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:fresh</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">application-view</code> <code class="clojure plain">(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/set-attr</code> <code class="clojure constants">:src</code> <code class="clojure string">"javascripts/out/goog/base.js"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/set-attr</code> <code class="clojure constants">:src</code> <code class="clojure string">"javascripts/fresh.js"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/content</code> <code class="clojure string">"goog.require('one.browser.repl_client');"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number19 index18 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">script</code> <code class="clojure plain">(</code><code class="clojure functions">html/content</code> <code class="clojure string">"one.browser.repl_client.repl();"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.reload" href="#one.reload" class="anchor"></a><h1 class="project-name">one.reload</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Contains functions which implement Clojure and ClojureScript code
  reloading.</p>

<p>  When any watched Clojure file changes, all watched Clojure files
  will be recompiled. If any ClojureScript file changes or if any
  template file changes, all ClojureScript files will be recompiled.</p>

<p>  Recompilation only happens on page reloads.</p>
</td><td class="codes"><div><div id="highlighter_812650" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.reload</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">cljs.closure</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">build</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.config</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">clojure.java.io</code> <code class="clojure constants">:as</code> <code class="clojure symbol">io</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_362819" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defonce</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">last-compile</code> <code class="clojure plain">(</code><code class="clojure functions">atom</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_660874" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">any-modified</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">k</code> <code class="clojure variable">files</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">newest</code> <code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">max</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure plain">#(</code><code class="clojure color1">.lastModified</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code> <code class="clojure variable">files</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure plain">(</code><code class="clojure functions">&gt;</code> <code class="clojure variable">newest</code> <code class="clojure plain">(</code><code class="clojure functions">get</code> <code class="clojure plain">@</code><code class="clojure symbol">last-compile</code> <code class="clojure variable">k</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">newest</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Return a seq of File objects that are descendants of dir that end
  with extension ext.</p>
</td><td class="codes"><div><div id="highlighter_770730" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">descendants-ending-with</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">dir</code> <code class="clojure variable">ext</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">filter</code> <code class="clojure plain">#(</code><code class="clojure color1">.endsWith</code> <code class="clojure plain">(</code><code class="clojure color1">.getName</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code> <code class="clojure variable">ext</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">file-seq</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure variable">dir</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_452029" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">any-modified-cljs</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">dir</code> <code class="clojure variable">k</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">files</code> <code class="clojure plain">(</code><code class="clojure functions">filter</code> <code class="clojure plain">#(</code><code class="clojure color1">.isFile</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">into</code> <code class="clojure plain">(</code><code class="clojure functions">descendants-ending-with</code> <code class="clojure variable">dir</code> <code class="clojure string">".cljs"</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">file-seq</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure string">"templates"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">any-modified</code> <code class="clojure variable">k</code> <code class="clojure variable">files</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Ring middleware which watches dir for changes to ClojureScript
  source files and template HTML files. When changes are detected,
  recompiles only the ClojureScript and template files (not the
  Clojure files) using a build configuration derived from config.</p>
</td><td class="codes"><div><div id="highlighter_396357" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">watch-cljs</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">handler</code> <code class="clojure variable">config</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">request</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">k</code> <code class="clojure plain">(</code><code class="clojure functions">:uri</code> <code class="clojure variable">request</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">ts</code> <code class="clojure plain">(</code><code class="clojure functions">any-modified-cljs</code> <code class="clojure plain">(</code><code class="clojure functions">:src-root</code> <code class="clojure variable">config</code><code class="clojure plain">)</code> <code class="clojure variable">k</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure variable">ts</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">last-compile</code> <code class="clojure symbol">assoc</code> <code class="clojure variable">k</code> <code class="clojure variable">ts</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">build-opts</code> <code class="clojure plain">(</code><code class="clojure functions">cljs-build-opts</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">file</code> <code class="clojure plain">(</code><code class="clojure functions">file-seq</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">:output-dir</code> <code class="clojure variable">build-opts</code><code class="clojure plain">)</code> <code class="clojure string">"/"</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:top-level-package</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.setLastModified</code> <code class="clojure variable">file</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">build</code> <code class="clojure plain">(</code><code class="clojure functions">:app-root</code> <code class="clojure variable">config</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">cond</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">:uri</code> <code class="clojure variable">request</code><code class="clojure plain">)</code> <code class="clojure string">"/production"</code><code class="clojure plain">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">build-opts</code> <code class="clojure constants">:optimizations</code> <code class="clojure constants">:advanced</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:output-to</code> <code class="clojure plain">(</code><code class="clojure functions">production-js</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">:uri</code> <code class="clojure variable">request</code><code class="clojure plain">)</code> <code class="clojure string">"/fresh"</code><code class="clojure plain">)</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">build-opts</code> <code class="clojure constants">:output-to</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">:js</code> <code class="clojure variable">config</code><code class="clojure plain">)</code> <code class="clojure string">"/fresh.js"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:default</code> <code class="clojure variable">build-opts</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">handler</code> <code class="clojure variable">request</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_60777" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">any-modified-clj</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">files</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">any-modified</code> <code class="clojure string">"clj"</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure plain">#(</code><code class="clojure functions">-&gt;</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure symbol">%</code> <code class="clojure string">".clj"</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.substring</code> <code class="clojure value">1</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">io/resource</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.getFile</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">io/file</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">files</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Ring middleware which watches a list of Clojure files for changes
  and recompiles all of them when any of the files change.</p>
</td><td class="codes"><div><div id="highlighter_880471" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">reload-clj</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">handler</code> <code class="clojure variable">files</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">request</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when-let</code> <code class="clojure keyword">[</code><code class="clojure variable">ts</code> <code class="clojure plain">(</code><code class="clojure functions">any-modified-clj</code> <code class="clojure variable">files</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">last-compile</code> <code class="clojure symbol">assoc</code> <code class="clojure string">"clj"</code> <code class="clojure variable">ts</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">ns</code> <code class="clojure plain">(</code><code class="clojure functions">ns-name</code> <code class="clojure symbol">*ns*</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">load</code> <code class="clojure variable">files</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">handler</code> <code class="clojure variable">request</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.templates" href="#one.templates" class="anchor"></a><h1 class="project-name">one.templates</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Contains functions for combining HTML fragments into complete HTML documents.</p>
</td><td class="codes"><div><div id="highlighter_802095" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.templates</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure symbol">net.cgrand.enlive-html</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:import</code> <code class="clojure color3">java.io.File</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a seq of Enlive nodes, return the corresponding HTML string.</p>
</td><td class="codes"><div><div id="highlighter_275157" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">render</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">t</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">str</code> <code class="clojure plain">(</code><code class="clojure functions">emit*</code> <code class="clojure variable">t</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_328936" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">declare</code> <code class="clojure symbol">construct-html</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_466722" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">html-body</code> <code class="clojure keyword">[</code><code class="clojure variable">name</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:content</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure plain">(</code><code class="clojure functions">select</code> <code class="clojure plain">(</code><code class="clojure functions">html-resource</code> <code class="clojure variable">name</code><code class="clojure plain">)</code> <code class="clojure keyword">[</code><code class="clojure constants">:body</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_500848" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">include-html</code> <code class="clojure keyword">[</code><code class="clojure variable">h</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">includes</code> <code class="clojure plain">(</code><code class="clojure functions">select</code> <code class="clojure variable">h</code> <code class="clojure keyword">[</code><code class="clojure constants">:_include</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">loop</code> <code class="clojure keyword">[</code><code class="clojure variable">h</code> <code class="clojure variable">h</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">includes</code> <code class="clojure plain">(</code><code class="clojure functions">seq</code> <code class="clojure variable">includes</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure variable">includes</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">file</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">includes</code><code class="clojure plain">)</code> <code class="clojure constants">:attrs</code> <code class="clojure constants">:file</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">include</code> <code class="clojure plain">(</code><code class="clojure functions">construct-html</code> <code class="clojure plain">(</code><code class="clojure functions">html-body</code> <code class="clojure variable">file</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">recur</code> <code class="clojure plain">(</code><code class="clojure functions">transform</code> <code class="clojure variable">h</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure constants">:_include</code> <code class="clojure plain">(</code><code class="clojure functions">attr=</code> <code class="clojure constants">:file</code> <code class="clojure variable">file</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">substitute</code> <code class="clojure variable">include</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">next</code> <code class="clojure variable">includes</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">h</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_431708" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">maps</code> <code class="clojure keyword">[</code><code class="clojure variable">c</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">filter</code> <code class="clojure symbol">map?</code> <code class="clojure variable">c</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_494246" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">replace-html</code> <code class="clojure keyword">[</code><code class="clojure variable">h</code> <code class="clojure variable">c</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">id</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">c</code> <code class="clojure constants">:attrs</code> <code class="clojure constants">:id</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">tag</code> <code class="clojure plain">(</code><code class="clojure functions">:tag</code> <code class="clojure variable">c</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">selector</code> <code class="clojure plain">(</code><code class="clojure functions">keyword</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">name</code> <code class="clojure variable">tag</code><code class="clojure plain">)</code> <code class="clojure string">"#"</code> <code class="clojure variable">id</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">transform</code> <code class="clojure variable">h</code> <code class="clojure keyword">[</code><code class="clojure variable">selector</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">substitute</code> <code class="clojure variable">c</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_235768" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">wrap-html</code> <code class="clojure keyword">[</code><code class="clojure variable">h</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">within</code> <code class="clojure plain">(</code><code class="clojure functions">seq</code> <code class="clojure plain">(</code><code class="clojure functions">select</code> <code class="clojure variable">h</code> <code class="clojure keyword">[</code><code class="clojure constants">:_within</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure variable">within</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">file</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">within</code><code class="clojure plain">)</code> <code class="clojure constants">:attrs</code> <code class="clojure constants">:file</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">outer</code> <code class="clojure plain">(</code><code class="clojure functions">construct-html</code> <code class="clojure plain">(</code><code class="clojure functions">html-resource</code> <code class="clojure variable">file</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">content</code> <code class="clojure plain">(</code><code class="clojure functions">maps</code> <code class="clojure plain">(</code><code class="clojure functions">:content</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">within</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">loop</code> <code class="clojure keyword">[</code><code class="clojure variable">outer</code> <code class="clojure variable">outer</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">content</code> <code class="clojure plain">(</code><code class="clojure functions">seq</code> <code class="clojure variable">content</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure variable">content</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">recur</code> <code class="clojure plain">(</code><code class="clojure functions">replace-html</code> <code class="clojure variable">outer</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">content</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">next</code> <code class="clojure variable">content</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">outer</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">h</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Process a seq of Enlive nodes looking for <code>_include</code> and <code>_within</code> tags.
  Occurrences of <code>_include</code> are replaced by the resource to which they
  refer. The contents of <code>_within</code> tags are inserted into the resource
  to which they refer. <code>_within</code> is always the top-level tag in a file.
  <code>_include</code> can appear anywhere. Files with <code>_include</code> can reference
  files which themselves contain <code>_include</code> or <code>_within</code> tags, to an
  arbitrary level of nesting.</p>

<p>  For more information, see '<a href="https://github.com/brentonashworth/one/wiki/Design-and-templating">Design and Templating</a>' in the project
  wiki.</p>

<p>  Returns a seq of Enlive nodes.</p>
</td><td class="codes"><div><div id="highlighter_64998" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">construct-html</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">nodes</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">wrap-html</code> <code class="clojure plain">(</code><code class="clojure functions">include-html</code> <code class="clojure variable">nodes</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accept a file (a path to a resource on the classpath) and return a
  HTML string processed per construct-html.</p>
</td><td class="codes"><div><div id="highlighter_130979" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">load-html</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">file</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">render</code> <code class="clojure plain">(</code><code class="clojure functions">construct-html</code> <code class="clojure plain">(</code><code class="clojure functions">html-resource</code> <code class="clojure variable">file</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Ring middleware which intercepts files served from the public
  directory and applies templating.</p>
</td><td class="codes"><div><div id="highlighter_146510" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">apply-templates</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">handler</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">request</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">headers</code> <code class="clojure variable">body</code><code class="clojure keyword">]</code> <code class="clojure constants">:as</code> <code class="clojure symbol">response</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">handler</code> <code class="clojure variable">request</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">and</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">type</code> <code class="clojure variable">body</code><code class="clojure plain">)</code> <code class="clojure color3">File</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.endsWith</code> <code class="clojure plain">(</code><code class="clojure color1">.getName</code> <code class="clojure variable">body</code><code class="clojure plain">)</code> <code class="clojure string">".html"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">new-body</code> <code class="clojure plain">(</code><code class="clojure functions">render</code> <code class="clojure plain">(</code><code class="clojure functions">construct-html</code> <code class="clojure plain">(</code><code class="clojure functions">html-snippet</code> <code class="clojure plain">(</code><code class="clojure functions">slurp</code> <code class="clojure variable">body</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure value">200</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:headers</code> <code class="clojure keyword">{</code><code class="clojure string">"Content-Type"</code> <code class="clojure string">"text/html; charset=utf-8"</code><code class="clojure keyword">}</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:body</code> <code class="clojure variable">new-body</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">response</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.test" href="#one.test" class="anchor"></a><h1 class="project-name">one.test</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Support for evaluating ClojureScript code from Clojure tests.</p>
</td><td class="codes"><div><div id="highlighter_510428" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.test</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:refer-clojure</code> <code class="clojure constants">:exclude</code> <code class="clojure keyword">[</code><code class="clojure symbol">load-file</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">cljs.repl.browser</code> <code class="clojure constants">:as</code> <code class="clojure symbol">browser</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">cljs.compiler</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">namespaces</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">cljs.repl</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">evaluate-form</code> <code class="clojure symbol">load-file</code> <code class="clojure symbol">load-namespace</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.java.browse</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">browse-url</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">cljs.repl</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">-setup</code> <code class="clojure symbol">-tear-down</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.dev-server</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">run-server</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_540685" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:dynamic</code> <code class="clojure symbol">*eval-env*</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Evaluate a ClojureScript form within the given evaluation
  environment. The form will also be evaluated in the passed namespace
  which defaults to <code>'cljs.user</code>.</p>
</td><td class="codes"><div><div id="highlighter_578706" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">evaluate-cljs</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">eval-env</code> <code class="clojure variable">form</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">evaluate-cljs</code> <code class="clojure variable">eval-env</code> <code class="clojure preprocessor">'</code><code class="clojure symbol quoted">cljs.user</code> <code class="clojure variable">form</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">eval-env</code> <code class="clojure variable">ns</code> <code class="clojure variable">form</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">env</code> <code class="clojure keyword">{</code><code class="clojure constants">:context</code> <code class="clojure constants">:statement</code> <code class="clojure constants">:locals</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">cond</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">and</code> <code class="clojure plain">(</code><code class="clojure functions">seq?</code> <code class="clojure variable">form</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure preprocessor">'</code><code class="clojure keyword">#{</code><code class="clojure symbol">load-file</code> <code class="clojure symbol">clojure.core/load-file</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">form</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">load-file</code> <code class="clojure variable">eval-env</code> <code class="clojure plain">(</code><code class="clojure functions">second</code> <code class="clojure variable">form</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">and</code> <code class="clojure plain">(</code><code class="clojure functions">seq?</code> <code class="clojure variable">form</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure preprocessor">'</code><code class="clojure keyword">#{</code><code class="clojure symbol">load-namespace</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">form</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">load-namespace</code> <code class="clojure variable">eval-env</code> <code class="clojure plain">(</code><code class="clojure functions">second</code> <code class="clojure variable">form</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:else</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">ret</code> <code class="clojure plain">(</code><code class="clojure functions">evaluate-form</code> <code class="clojure variable">eval-env</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">env</code> <code class="clojure constants">:ns</code> <code class="clojure plain">(</code><code class="clojure plain">@</code><code class="clojure symbol">namespaces</code> <code class="clojure variable">ns</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"&lt;testing&gt;"</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">form</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">x</code><code class="clojure keyword">]</code> <code class="clojure undefined">`</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">cljs.core.pr-str</code> <code class="clojure preprocessor">~</code><code class="clojure variable">x</code><code class="clojure plain quoted">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">try</code> <code class="clojure plain">(</code><code class="clojure functions">read-string</code> <code class="clojure variable">ret</code><code class="clojure plain">)</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">catch</code> <code class="clojure color3">Exception</code> <code class="clojure symbol">e</code></div><div class="line number19 index18 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">string?</code> <code class="clojure variable">ret</code><code class="clojure plain">)</code></div><div class="line number20 index19 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">ret</code></div><div class="line number21 index20 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure value">nil</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Using evaluation environment <code>eval-env</code> evaluate form in namespace
  <code>ns</code> in the browser until <code>pred</code> applied to the result returns <code>true</code> or
  the timeout expires. If <code>pred</code> returns logical true, returns the
  result of <code>pred</code>. Throws <code>Exception</code> if the timeout (in milliseconds)
  has expired.</p>
</td><td class="codes"><div><div id="highlighter_456904" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">cljs-wait-for*</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">eval-env</code> <code class="clojure variable">pred</code> <code class="clojure variable">ns</code> <code class="clojure variable">form</code> <code class="clojure variable">remaining</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">pos?</code> <code class="clojure variable">remaining</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if-let</code> <code class="clojure keyword">[</code><code class="clojure variable">result</code> <code class="clojure plain">(</code><code class="clojure functions">pred</code> <code class="clojure plain">(</code><code class="clojure functions">evaluate-cljs</code> <code class="clojure variable">eval-env</code> <code class="clojure variable">ns</code> <code class="clojure variable">form</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">result</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">do</code> <code class="clojure plain">(</code><code class="clojure color1">Thread/sleep</code> <code class="clojure value">10</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">recur</code> <code class="clojure variable">eval-env</code> <code class="clojure variable">pred</code> <code class="clojure variable">ns</code> <code class="clojure variable">form</code> <code class="clojure plain">(</code><code class="clojure functions">-</code> <code class="clojure variable">remaining</code> <code class="clojure value">10</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">throw</code> <code class="clojure plain">(</code><code class="clojure color1">Exception.</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"Form "</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">form</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">" did not satisfy predicate before the timeout expired."</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Expands to a call to <code>cljs-wait-for*</code> using <code>*eval-env*</code> as the
  evaluation environment and a timeout of roughly one minute.</p>
</td><td class="codes"><div><div id="highlighter_710714" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmacro</code> <code class="clojure symbol">cljs-wait-for</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">pred</code> <code class="clojure variable">ns</code> <code class="clojure variable">form</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure undefined">`</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">cljs-wait-for*</code> <code class="clojure symbol quoted">*eval-env*</code> <code class="clojure preprocessor">~</code><code class="clojure variable">pred</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">quote</code> <code class="clojure preprocessor">~</code><code class="clojure variable">ns</code><code class="clojure plain quoted">)</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">quote</code> <code class="clojure preprocessor">~</code><code class="clojure variable">form</code><code class="clojure plain quoted">)</code> <code class="clojure value quoted">60000</code><code class="clojure plain quoted">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Ensure that that browser has completely loaded namespace ns. We
   need this because in some situations, we wind up trying to run code
   that depends on a namespace that isn't available yet, due to
   asynchrony in the browser. Returns true if the namespace loads
   within the specified timeout (roughly 60 seconds by default), and
   throws <code>Exception</code> otherwise.</p>
</td><td class="codes"><div><div id="highlighter_900803" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">ensure-ns-loaded</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">eval-env</code> <code class="clojure variable">ns</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">ensure-ns-loaded</code> <code class="clojure variable">eval-env</code> <code class="clojure variable">ns</code> <code class="clojure value">60000</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">eval-env</code> <code class="clojure variable">ns</code> <code class="clojure variable">remaining</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">pos?</code> <code class="clojure variable">remaining</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">evaluate-cljs</code> <code class="clojure variable">eval-env</code> <code class="clojure plain">(</code><code class="clojure functions">list</code> <code class="clojure preprocessor">'</code><code class="clojure symbol quoted">boolean</code> <code class="clojure variable">ns</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure value">true</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">do</code> <code class="clojure plain">(</code><code class="clojure color1">Thread/sleep</code> <code class="clojure value">10</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">recur</code> <code class="clojure variable">eval-env</code> <code class="clojure variable">ns</code> <code class="clojure plain">(</code><code class="clojure functions">-</code> <code class="clojure variable">remaining</code> <code class="clojure value">10</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">throw</code> <code class="clojure plain">(</code><code class="clojure color1">Exception.</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"Namespace "</code> <code class="clojure variable">ns</code> <code class="clojure string">" did not load before the timeout expired."</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Evaluate forms in namespace <code>ns</code> in the evaluation environment
  <code>*eval-env*</code>.</p>
</td><td class="codes"><div><div id="highlighter_744498" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmacro</code> <code class="clojure symbol">cljs-eval</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">ns</code> <code class="clojure symbol">&amp;</code> <code class="clojure variable">forms</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure undefined">`</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">do</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">ensure-ns-loaded</code> <code class="clojure symbol quoted">*eval-env*</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">quote</code> <code class="clojure preprocessor">~</code><code class="clojure variable">ns</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure preprocessor">~@</code><code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">x</code><code class="clojure keyword">]</code> <code class="clojure undefined">`</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">evaluate-cljs</code> <code class="clojure symbol quoted">*eval-env*</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">quote</code> <code class="clojure preprocessor">~</code><code class="clojure variable">ns</code><code class="clojure plain quoted">)</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">quote</code> <code class="clojure preprocessor">~</code><code class="clojure variable">x</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain">)</code> <code class="clojure variable">forms</code><code class="clojure plain">)</code><code class="clojure plain quoted">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Evaluate f with <code>one.test/*eval-env*</code> bound to a browser evaluation
  environment. Opens a browser window and navigates to url which
  defaults to 'http://localhost:8080/development'.</p>
</td><td class="codes"><div><div id="highlighter_188421" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">within-browser-env</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">f</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">within-browser-env</code> <code class="clojure string">"<a href="http://localhost:8080/development">http://localhost:8080/development</a>"</code> <code class="clojure value">nil</code> <code class="clojure variable">f</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">url</code> <code class="clojure variable">init</code> <code class="clojure variable">f</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">server</code> <code class="clojure plain">(</code><code class="clojure functions">run-server</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">eval-env</code> <code class="clojure plain">(</code><code class="clojure functions">browser/repl-env</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">-setup</code> <code class="clojure variable">eval-env</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">browse-url</code> <code class="clojure variable">url</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">binding</code> <code class="clojure keyword">[</code><code class="clojure variable">*eval-env*</code> <code class="clojure variable">eval-env</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure variable">init</code> <code class="clojure plain">(</code><code class="clojure functions">init</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">f</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">-tear-down</code> <code class="clojure variable">eval-env</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.stop</code> <code class="clojure variable">server</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Set up the ClojureScript testing namespace. This will arrange for
  all tests to be run in the provided namespace within the provided
  evaluation environment. This must appear only once per Clojure
  namespace and before any calls to js-defn or js.</p>

<p>  This macro will define the vars, js-test-namespace and js-functions,
  in the calling namespace.</p>
</td><td class="codes"><div><div id="highlighter_110179" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmacro</code> <code class="clojure symbol">js-ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">ns</code> <code class="clojure variable">env-fn</code> <code class="clojure variable">url</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure undefined">`</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">do</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">def</code> <code class="clojure preprocessor">~</code><code class="clojure preprocessor">'</code><code class="clojure symbol quoted">js-test-namespace</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">quote</code> <code class="clojure preprocessor">~</code><code class="clojure variable">ns</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">def</code> <code class="clojure preprocessor">~</code><code class="clojure preprocessor">'</code><code class="clojure symbol quoted">js-functions</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">atom</code> <code class="clojure keyword">[</code><code class="clojure keyword">]</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain quoted">(</code><code class="clojure preprocessor">~</code><code class="clojure preprocessor">'</code><code class="clojure symbol quoted">use-fixtures</code> <code class="clojure constants quoted">:once</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">partial</code> <code class="clojure preprocessor">~</code><code class="clojure variable">env-fn</code> <code class="clojure preprocessor">~</code><code class="clojure variable">url</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">]</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">do</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">cljs-eval</code> <code class="clojure symbol quoted">cljs.user</code> <code class="clojure plain quoted">(</code><code class="clojure preprocessor">~</code><code class="clojure preprocessor">'</code><code class="clojure symbol quoted">load-namespace</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">quote</code> <code class="clojure preprocessor">~</code><code class="clojure variable">ns</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">doseq</code> <code class="clojure keyword quoted">[</code><code class="clojure variable quoted">f#</code> <code class="clojure plain quoted">@</code><code class="clojure preprocessor">~</code><code class="clojure preprocessor">'</code><code class="clojure symbol quoted">js-functions</code><code class="clojure keyword quoted">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">f#</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Get the symbol for the current testing namespace.</p>
</td><td class="codes"><div><div id="highlighter_143692" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">test-namespace</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">test-ns-var</code> <code class="clojure plain">(</code><code class="clojure functions">symbol</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure symbol">*ns*</code><code class="clojure plain">)</code> <code class="clojure string">"js-test-namespace"</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">var-get</code> <code class="clojure plain">(</code><code class="clojure functions">find-var</code> <code class="clojure variable">test-ns-var</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Define a ClojureScript function in the test namespace in the
  current JavaScript evaluation environment.</p>

<p>  All ClojureScript functions will be loaded before tests are run.</p>
</td><td class="codes"><div><div id="highlighter_288339" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmacro</code> <code class="clojure symbol">js-defn</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">name</code> <code class="clojure symbol">&amp;</code> <code class="clojure variable">body</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">doc-string</code> <code class="clojure variable">args</code> <code class="clojure symbol">&amp;</code> <code class="clojure variable">body</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">string?</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">body</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">body</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">conj</code> <code class="clojure variable">body</code> <code class="clojure string">""</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure undefined">`</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">swap!</code> <code class="clojure preprocessor">~</code><code class="clojure preprocessor">'</code><code class="clojure symbol quoted">js-functions</code> <code class="clojure symbol quoted">conj</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">]</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">cljs-eval</code> <code class="clojure preprocessor">~</code><code class="clojure plain">(</code><code class="clojure functions">test-namespace</code><code class="clojure plain">)</code> <code class="clojure plain quoted">(</code><code class="clojure functions quoted">defn</code> <code class="clojure preprocessor">~</code><code class="clojure symbol">name</code> <code class="clojure preprocessor">~</code><code class="clojure symbol">args</code> <code class="clojure preprocessor">~@</code><code class="clojure symbol">body</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain quoted">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a form and evaluates it in the current testing namespace
  and evaluation environment.</p>
</td><td class="codes"><div><div id="highlighter_262834" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmacro</code> <code class="clojure symbol">js</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">form</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure undefined">`</code><code class="clojure plain quoted">(</code><code class="clojure functions quoted">cljs-eval</code> <code class="clojure preprocessor">~</code><code class="clojure plain">(</code><code class="clojure functions">test-namespace</code><code class="clojure plain">)</code> <code class="clojure preprocessor">~</code><code class="clojure variable">form</code><code class="clojure plain quoted">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.tools" href="#one.tools" class="anchor"></a><h1 class="project-name">one.tools</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Support for building deployment artifacts for a project.</p>
</td><td class="codes"><div><div id="highlighter_747248" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">one.tools</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">cljs.closure</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">build</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.host-page</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">application-host</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.config</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">cljs-build-opts</code> <code class="clojure symbol">production-js</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">cljs.repl</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">repl</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">cljs.repl.browser</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">repl-env</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">clojure.java.io</code> <code class="clojure constants">:as</code> <code class="clojure symbol">io</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Emit both a JavaScript file containing the compiled ClojureScript
  application and the host HTML page.</p>
</td><td class="codes"><div><div id="highlighter_435605" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">build-project</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">config</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">build</code> <code class="clojure plain">(</code><code class="clojure functions">:app-root</code> <code class="clojure variable">config</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure plain">(</code><code class="clojure functions">cljs-build-opts</code> <code class="clojure variable">config</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:optimizations</code> <code class="clojure constants">:advanced</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:output-to</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"out/"</code> <code class="clojure plain">(</code><code class="clojure functions">production-js</code> <code class="clojure variable">config</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">spit</code> <code class="clojure string">"out/public/index.html"</code> <code class="clojure plain">(</code><code class="clojure functions">application-host</code> <code class="clojure variable">config</code> <code class="clojure constants">:production</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Start a ClojureScript REPL which can connect to the development
  version of the application. The REPL will not work until the
  development page connects to it, so you will need to either open or
  refresh the development page after calling this function.</p>
</td><td class="codes"><div><div id="highlighter_187077" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">cljs-repl</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">repl</code> <code class="clojure plain">(</code><code class="clojure functions">repl-env</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Recursively copy the files in src to dest.</p>
</td><td class="codes"><div><div id="highlighter_791583" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">copy-recursive-into</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">src</code> <code class="clojure variable">dest</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">file</code> <code class="clojure plain">(</code><code class="clojure functions">remove</code> <code class="clojure plain">#(</code><code class="clojure color1">.isDirectory</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">file-seq</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure variable">src</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">dest-file</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure variable">dest</code> <code class="clojure variable">file</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.mkdirs</code> <code class="clojure plain">(</code><code class="clojure color1">.getParentFile</code> <code class="clojure variable">dest-file</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">io/copy</code> <code class="clojure variable">file</code> <code class="clojure variable">dest-file</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Delete one or more files or directories. Directories are recursively
  deleted.</p>
</td><td class="codes"><div><div id="highlighter_656981" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">delete</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">&amp;</code> <code class="clojure variable">paths</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">path</code> <code class="clojure variable">paths</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">file</code> <code class="clojure plain">(</code><code class="clojure functions">reverse</code> <code class="clojure plain">(</code><code class="clojure functions">file-seq</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure variable">path</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.delete</code> <code class="clojure variable">file</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="script.docs" href="#script.docs" class="anchor"></a><h1 class="project-name">script.docs</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Provides a <code>-main</code> function which will generate the documentation for
  the website, the documentation that you are viewing at this very
  moment.</p>
</td><td class="codes"><div><div id="highlighter_183353" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code> <code class="clojure symbol">script.docs</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">net.cgrand.enlive-html</code> <code class="clojure constants">:as</code> <code class="clojure symbol">html</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.java.io</code> <code class="clojure constants">:as</code> <code class="clojure symbol">io</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a relative path for an HTML file and returns the body
  content from that file.</p>
</td><td class="codes"><div><div id="highlighter_271742" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">uberdoc-content</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">file</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure variable">file</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">html/html-resource</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/select</code> <code class="clojure keyword">[</code><code class="clojure constants">:body</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">first</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:content</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts the relative path for the documentation template file
  and the margenalia content and returns the documentation page for
  the website.</p>
</td><td class="codes"><div><div id="highlighter_475006" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">docs</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">template</code> <code class="clojure variable">marg</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure plain">(</code><code class="clojure functions">io/file</code> <code class="clojure variable">template</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">html/html-resource</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/transform</code> <code class="clojure keyword">[</code><code class="clojure constants">:div#marginalia-documentation</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">html/substitute</code> <code class="clojure variable">marg</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Create the documentation.html page for the website. Outputs this
  file as <code>docs/documentation.html</code>.</p>
</td><td class="codes"><div><div id="highlighter_781067" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">-main</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">marg</code> <code class="clojure plain">(</code><code class="clojure functions">uberdoc-content</code> <code class="clojure string">"docs/uberdoc.html"</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">docs</code> <code class="clojure plain">(</code><code class="clojure functions">docs</code> <code class="clojure string">"script/documentation.html"</code> <code class="clojure variable">marg</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">spit</code> <code class="clojure string">"docs/documentation.html"</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">str</code> <code class="clojure plain">(</code><code class="clojure functions">html/emit*</code> <code class="clojure variable">docs</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.animation" href="#one.sample.animation" class="anchor"></a><h1 class="project-name">one.sample.animation</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Defines animations which are used in the sample
  application.</p>
</td><td class="codes"><div><div id="highlighter_623704" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.sample.animation</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.core</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">start</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.browser.animation</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">bind</code> <code class="clojure symbol">parallel</code> <code class="clojure symbol">serial</code> <code class="clojure symbol">play</code> <code class="clojure symbol">play-animation</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">domina</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure symbol">set-html!</code> <code class="clojure symbol">set-styles!</code> <code class="clojure symbol">destroy-children!</code> <code class="clojure symbol">append!</code> <code class="clojure symbol">single-node</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">domina.xpath</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">xpath</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">goog.dom.forms</code> <code class="clojure constants">:as</code> <code class="clojure symbol">gforms</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.style</code> <code class="clojure constants">:as</code> <code class="clojure symbol">style</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_907061" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure symbol">form</code> <code class="clojure string">"//div[@id='form']"</code><code class="clojure plain">)</code></div><div class="line number2 index1 alt1"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure symbol">cloud</code> <code class="clojure string">"//div[@id='greeting']"</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure symbol">label</code> <code class="clojure string">"//label[@id='name-input-label']/span"</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_927714" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">form-in</code> <code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade</code> <code class="clojure constants">:start</code> <code class="clojure value">0</code> <code class="clojure constants">:end</code> <code class="clojure value">1</code> <code class="clojure constants">:time</code> <code class="clojure value">800</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts the form and greeting view HTML and adds them to the
  page. Animates the form sliding in from above. This function must be
  run before any other view functions. It may be called from any state
  to reset the UI.</p>
</td><td class="codes"><div><div id="highlighter_12525" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">initialize-views</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">form-html</code> <code class="clojure variable">greeting-html</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">content</code> <code class="clojure plain">(</code><code class="clojure functions">xpath</code> <code class="clojure string">"//div[@id='content']"</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">destroy-children!</code> <code class="clojure variable">content</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-html!</code> <code class="clojure variable">content</code> <code class="clojure variable">form-html</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">append!</code> <code class="clojure variable">content</code> <code class="clojure variable">greeting-html</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">;; Required for IE8 to work correctly</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">style/setOpacity</code> <code class="clojure plain">(</code><code class="clojure functions">single-node</code> <code class="clojure plain">(</code><code class="clojure functions">xpath</code> <code class="clojure symbol">label</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure value">1</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-styles!</code> <code class="clojure plain">(</code><code class="clojure functions">xpath</code> <code class="clojure symbol">cloud</code><code class="clojure plain">)</code> <code class="clojure keyword">{</code><code class="clojure constants">:opacity</code> <code class="clojure string">"0"</code> <code class="clojure constants">:display</code> <code class="clojure string">"none"</code> <code class="clojure constants">:margin-top</code> <code class="clojure string">"-500px"</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-styles!</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"greet-button"</code><code class="clojure plain">)</code> <code class="clojure keyword">{</code><code class="clojure constants">:opacity</code> <code class="clojure string">"0.2"</code> <code class="clojure constants">:disabled</code> <code class="clojure value">true</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure symbol">form</code> <code class="clojure symbol">form-in</code> <code class="clojure keyword">{</code><code class="clojure constants">:after</code> <code class="clojure plain">#(</code><code class="clojure color1">.focus</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"name-input"</code><code class="clojure plain">)</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_372553" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Try it</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">initialize-views</code> <code class="clojure comments">(</code><code class="clojure comments">:form</code> <code class="clojure comments">one.sample.view/snippets</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">:greeting</code> <code class="clojure comments">one.sample.view/snippets</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Move the passed input field label above the input field. Run when
  the field gets focus and is empty.</p>
</td><td class="codes"><div><div id="highlighter_471256" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">label-move-up</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">label</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">label</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:color</code> <code class="clojure constants">:end</code> <code class="clojure string">"#53607b"</code> <code class="clojure constants">:time</code> <code class="clojure value">200</code><code class="clojure keyword">}</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:slide</code> <code class="clojure constants">:up</code> <code class="clojure value">40</code> <code class="clojure constants">:time</code> <code class="clojure value">200</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Make the passed input field label invisible. Run when the input
  field loses focus and contains a valid input value.</p>
</td><td class="codes"><div><div id="highlighter_797427" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">label-fade-out</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">label</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">label</code> <code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade</code> <code class="clojure constants">:end</code> <code class="clojure value">0</code> <code class="clojure constants">:time</code> <code class="clojure value">200</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_836423" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure symbol">move-down</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade</code> <code class="clojure constants">:end</code> <code class="clojure value">1</code> <code class="clojure constants">:time</code> <code class="clojure value">200</code><code class="clojure keyword">}</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:color</code> <code class="clojure constants">:end</code> <code class="clojure string">"#BBC4D7"</code> <code class="clojure constants">:time</code> <code class="clojure value">200</code><code class="clojure keyword">}</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:slide</code> <code class="clojure constants">:down</code> <code class="clojure value">40</code> <code class="clojure constants">:time</code> <code class="clojure value">200</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_389588" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure symbol">fade-in</code> <code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade</code> <code class="clojure constants">:end</code> <code class="clojure value">1</code> <code class="clojure constants">:time</code> <code class="clojure value">400</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_127272" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure symbol">fade-out</code> <code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade</code> <code class="clojure constants">:end</code> <code class="clojure value">0</code> <code class="clojure constants">:time</code> <code class="clojure value">400</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Make the passed input field label visible and move it down into the
  input field. Run when an input field loses focus and is empty.</p>
</td><td class="codes"><div><div id="highlighter_510439" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">label-move-down</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">label</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">label</code> <code class="clojure symbol">move-down</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_939098" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Examples of label effects.</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">label-move-up</code> <code class="clojure comments">label</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">label-fade-out</code> <code class="clojure comments">label</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">label-move-down</code> <code class="clojure comments">label</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Move the form out of view and the greeting into view. Run when the
  submit button is clicked and the form has valid input.</p>
</td><td class="codes"><div><div id="highlighter_983115" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">show-greeting</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">e</code> <code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade</code> <code class="clojure constants">:end</code> <code class="clojure value">0</code> <code class="clojure constants">:time</code> <code class="clojure value">500</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play-animation</code> <code class="clojure plain">#(</code><code class="clojure functions">parallel</code> <code class="clojure plain">(</code><code class="clojure functions">bind</code> <code class="clojure symbol">form</code> <code class="clojure variable">e</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bind</code> <code class="clojure symbol">label</code> <code class="clojure variable">e</code><code class="clojure plain">)</code> <code class="clojure comments">; Since the label won't fade in IE</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bind</code> <code class="clojure symbol">cloud</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:color</code> <code class="clojure constants">:time</code> <code class="clojure value">500</code><code class="clojure keyword">}</code> <code class="clojure comments">; Dummy animation for delay purposes</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade-in-and-show</code> <code class="clojure constants">:time</code> <code class="clojure value">600</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:before</code> <code class="clojure plain">#(</code><code class="clojure functions">gforms/setDisabled</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"name-input"</code><code class="clojure plain">)</code> <code class="clojure value">true</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">;; We need this next one because IE8 won't hide the button</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:after</code> <code class="clojure plain">#(</code><code class="clojure functions">set-styles!</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"greet-button"</code><code class="clojure plain">)</code> <code class="clojure keyword">{</code><code class="clojure constants">:display</code> <code class="clojure string">"none"</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Move the greeting cloud out of view and show the form. Run when the
  back button is clicked from the greeting view.</p>
</td><td class="codes"><div><div id="highlighter_615789" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">show-form</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play-animation</code> <code class="clojure plain">(</code><code class="clojure functions">serial</code> <code class="clojure plain">(</code><code class="clojure functions">parallel</code> <code class="clojure plain">(</code><code class="clojure functions">bind</code> <code class="clojure symbol">cloud</code> <code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade-out-and-hide</code> <code class="clojure constants">:time</code> <code class="clojure value">500</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bind</code> <code class="clojure symbol">form</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:color</code> <code class="clojure constants">:time</code> <code class="clojure value">300</code><code class="clojure keyword">}</code> <code class="clojure comments">; Dummy animation for delay purposes</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">form-in</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bind</code> <code class="clojure symbol">label</code> <code class="clojure symbol">fade-in</code> <code class="clojure symbol">move-down</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure comments">;; Because IE8 won't hide the button, we need to</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">;; toggle it between displaying inline and none</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:before</code> <code class="clojure plain">#(</code><code class="clojure functions">set-styles!</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"greet-button"</code><code class="clojure plain">)</code> <code class="clojure keyword">{</code><code class="clojure constants">:display</code> <code class="clojure string">"inline"</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:after</code> <code class="clojure plain">#(</code><code class="clojure functions">do</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">gforms/setDisabled</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"name-input"</code><code class="clojure plain">)</code> <code class="clojure value">false</code><code class="clojure plain">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.focus</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"name-input"</code><code class="clojure plain">)</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_98952" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Switch between greeting and form views</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">label-move-up</code> <code class="clojure comments">label</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">show-greeting</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">show-form</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an element id for a button and disables it. Fades the
  button to 0.2 opacity.</p>
</td><td class="codes"><div><div id="highlighter_975721" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">disable-button</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">id</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">button</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure variable">id</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">gforms/setDisabled</code> <code class="clojure variable">button</code> <code class="clojure value">true</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">button</code> <code class="clojure keyword">{</code><code class="clojure constants">:effect</code> <code class="clojure constants">:fade</code> <code class="clojure constants">:end</code> <code class="clojure value">0.2</code> <code class="clojure constants">:time</code> <code class="clojure value">400</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an element id for a button and enables it. Fades the button
  to an opactiy of 1.</p>
</td><td class="codes"><div><div id="highlighter_804897" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">enable-button</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">id</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">button</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure variable">id</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">gforms/setDisabled</code> <code class="clojure variable">button</code> <code class="clojure value">false</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">button</code> <code class="clojure symbol">fade-in</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_445922" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Examples of all effects</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">initialize-views</code> <code class="clojure comments">(</code><code class="clojure comments">:form</code> <code class="clojure comments">one.sample.view/snippets</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">:greeting</code> <code class="clojure comments">one.sample.view/snippets</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">label-move-up</code> <code class="clojure comments">label</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">label-fade-out</code> <code class="clojure comments">label</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">show-greeting</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">show-form</code><code class="clojure comments">)</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">disable-button</code> <code class="clojure comments">"greet-button"</code><code class="clojure comments">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">enable-button</code> <code class="clojure comments">"greet-button"</code><code class="clojure comments">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.controller" href="#one.sample.controller" class="anchor"></a><h1 class="project-name">one.sample.controller</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Respond to user actions by updating local and remote
  application state.</p>
</td><td class="codes"><div><div id="highlighter_843811" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.sample.controller</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.browser.remote</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">request</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.sample.model</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">state</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">cljs.reader</code> <code class="clojure constants">:as</code> <code class="clojure symbol">reader</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.browser.event</code> <code class="clojure constants">:as</code> <code class="clojure symbol">event</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.dispatch</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dispatch</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.uri.utils</code> <code class="clojure constants">:as</code> <code class="clojure symbol">uri</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a map containing information about an action to perform.</p>

<p>  Actions may cause state changes on the client or the server. This
  function dispatches on the value of the <code>:type</code> key and currently
  supports <code>:init</code>, <code>:form</code>, and <code>:greeting</code> actions.</p>

<p>  The <code>:init</code> action will initialize the appliation's state.</p>

<p>  The <code>:form</code> action will only update the status atom, setting its state
  to <code>:from</code>.</p>

<p>  The <code>:greeting</code> action will send the entered name to the server and
  update the state to <code>:greeting</code> while adding <code>:name</code> and <code>:exists</code>
  values to the application's state.</p>
</td><td class="codes"><div><div id="highlighter_409686" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure symbol">action</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure constants">:type</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_266321" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">action</code> <code class="clojure constants">:init</code> <code class="clojure keyword">[</code><code class="clojure variable">_</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">reset!</code> <code class="clojure symbol">state</code> <code class="clojure keyword">{</code><code class="clojure constants">:state</code> <code class="clojure constants">:init</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_911238" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">action</code> <code class="clojure constants">:form</code> <code class="clojure keyword">[</code><code class="clojure variable">_</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when-not</code> <code class="clojure plain">(</code><code class="clojure keyword">#{</code><code class="clojure constants">:form</code> <code class="clojure constants">:init</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">:state</code> <code class="clojure plain">@</code><code class="clojure symbol">state</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">state</code> <code class="clojure symbol">assoc</code> <code class="clojure constants">:state</code> <code class="clojure constants">:form</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Get the name of the host which served this script.</p>
</td><td class="codes"><div><div id="highlighter_400779" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">host</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">uri/getHost</code> <code class="clojure plain">(</code><code class="clojure color1">.toString</code> <code class="clojure symbol">window.location</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a function id (an identifier for this request), data (the
  data to send to the server) and a callback function which will be
  called if the transmission is successful. Perform an Ajax <code>POST</code>
  request to the backend API which sends the passed data to the
  server.</p>

<p>  A tranmission error will add an error message to the application's
  state.</p>
</td><td class="codes"><div><div id="highlighter_967197" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">remote</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">f</code> <code class="clojure variable">data</code> <code class="clojure variable">on-success</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">request</code> <code class="clojure variable">f</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">host</code><code class="clojure plain">)</code> <code class="clojure string">"/remote"</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:method</code> <code class="clojure string">"POST"</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:on-success</code> <code class="clojure plain">#(</code><code class="clojure functions">on-success</code> <code class="clojure plain">(</code><code class="clojure functions">reader/read-string</code> <code class="clojure plain">(</code><code class="clojure functions">:body</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:on-error</code> <code class="clojure plain">#(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">state</code> <code class="clojure symbol">assoc</code> <code class="clojure constants">:error</code> <code class="clojure string">"Error communicating with server."</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:content</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"data="</code> <code class="clojure plain">(</code><code class="clojure functions">pr-str</code> <code class="clojure keyword">{</code><code class="clojure constants">:fn</code> <code class="clojure variable">f</code> <code class="clojure constants">:args</code> <code class="clojure variable">data</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>This is the success callback function which will be called when a
  request is successful. Accepts a name and a map of response data.
  Sets the current state to <code>:greeting</code> and adds the <code>:name</code> and
  <code>:exists</code> values to the application's state.</p>
</td><td class="codes"><div><div id="highlighter_444885" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">add-name-callback</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">name</code> <code class="clojure variable">response</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">state</code> <code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">old</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">old</code> <code class="clojure constants">:state</code> <code class="clojure constants">:greeting</code> <code class="clojure constants">:name</code> <code class="clojure variable">name</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:exists</code> <code class="clojure plain">(</code><code class="clojure functions">boolean</code> <code class="clojure plain">(</code><code class="clojure functions">:exists</code> <code class="clojure variable">response</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_816747" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">action</code> <code class="clojure constants">:greeting</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure variable">name</code> <code class="clojure constants">:name</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">remote</code> <code class="clojure constants">:add-name</code> <code class="clojure keyword">{</code><code class="clojure constants">:name</code> <code class="clojure variable">name</code><code class="clojure keyword">}</code> <code class="clojure plain">#(</code><code class="clojure functions">add-name-callback</code> <code class="clojure variable">name</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_669283" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure keyword">#{</code><code class="clojure constants">:init</code> <code class="clojure constants">:form</code> <code class="clojure constants">:greeting</code><code class="clojure keyword">}</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">t</code> <code class="clojure variable">d</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">action</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">d</code> <code class="clojure constants">:type</code> <code class="clojure variable">t</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.core" href="#one.sample.core" class="anchor"></a><h1 class="project-name">one.sample.core</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Contains the entry point for the ClojureScript sample application.</p>
</td><td class="codes"><div><div id="highlighter_786542" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.sample.core</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.browser.repl-client</code> <code class="clojure constants">:as</code> <code class="clojure symbol">repl-client</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.dispatch</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dispatch</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.sample.view</code> <code class="clojure constants">:as</code> <code class="clojure symbol">view</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Connects to a ClojureScript REPL running on localhost port 9000.</p>

<p>  This allows a browser-connected REPL to send JavaScript to the
  browser for evaluation. This function should be called from a script
  in the development host HTML page.</p>
</td><td class="codes"><div><div id="highlighter_343955" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure preprocessor">^</code><code class="clojure constants">:export</code> <code class="clojure symbol">repl</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">repl-client/repl</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Start the application by firing a <code>:init</code> event which will cause the
  form view to be displayed.</p>

<p>  This function must be called from the host HTML page to start the
  application.</p>
</td><td class="codes"><div><div id="highlighter_666774" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure preprocessor">^</code><code class="clojure constants">:export</code> <code class="clojure symbol">start</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure constants">:init</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.history" href="#one.sample.history" class="anchor"></a><h1 class="project-name">one.sample.history</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>When this library is loaded, a listener function is added
  which will be run when a :form or :greeting event is fired. This
  allows the use of the back button to navigate between views. This is
  accomplished by using library.browser.history to keep track of views
  that have previously been visited, and traversing them when
  navigation events are detected.</p>
</td><td class="codes"><div><div id="highlighter_909650" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.sample.history</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.dispatch</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dispatch</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.browser.history</code> <code class="clojure constants">:as</code> <code class="clojure symbol">history</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Handle navigation events by firing the appropriate view token.</p>
</td><td class="codes"><div><div id="highlighter_783948" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">nav-handler</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">token</code> <code class="clojure variable">navigation?</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure variable">navigation?</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure variable">token</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>The global history object for this application.</p>
</td><td class="codes"><div><div id="highlighter_318927" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">history</code> <code class="clojure plain">(</code><code class="clojure functions">history/history</code> <code class="clojure symbol">nav-handler</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_334130" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure keyword">#{</code><code class="clojure constants">:init</code> <code class="clojure constants">:form</code> <code class="clojure constants">:greeting</code><code class="clojure keyword">}</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">t</code> <code class="clojure variable">_</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">history/set-token</code> <code class="clojure symbol">history</code> <code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure keyword">#{</code><code class="clojure constants">:init</code><code class="clojure keyword">}</code> <code class="clojure variable">t</code><code class="clojure plain">)</code> <code class="clojure constants">:form</code> <code class="clojure variable">t</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.logging" href="#one.sample.logging" class="anchor"></a><h1 class="project-name">one.sample.logging</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>When this library is loaded, create a logger named
'events' and send all application-specific events to it.</p>

<p>To view log messages in the browser console, add a call
to <code>(log/console-output)</code> to this namespace or evaluate this from the
REPL.</p>

<p>For more information see library.logging.</p>
</td><td class="codes"><div><div id="highlighter_518159" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.sample.logging</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.dispatch</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dispatch</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.logging</code> <code class="clojure constants">:as</code> <code class="clojure symbol">log</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>The logger that receives all application-specific events.</p>
</td><td class="codes"><div><div id="highlighter_106511" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">logger</code> <code class="clojure plain">(</code><code class="clojure functions">log/get-logger</code> <code class="clojure string">"events"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_589393" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure plain">(</code><code class="clojure functions">constantly</code> <code class="clojure value">true</code><code class="clojure plain">)</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">t</code> <code class="clojure variable">d</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">log/info</code> <code class="clojure symbol">logger</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">pr-str</code> <code class="clojure variable">t</code><code class="clojure plain">)</code> <code class="clojure string">" - "</code> <code class="clojure plain">(</code><code class="clojure functions">pr-str</code> <code class="clojure variable">d</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_907751" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; log to the console</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">log/start-display</code> <code class="clojure comments">(</code><code class="clojure comments">log/console-output</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; log to to the "fancy" window</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">log/start-display</code> <code class="clojure comments">(</code><code class="clojure comments">log/fancy-output</code> <code class="clojure comments">"main"</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; change the logging level</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">log/set-level</code> <code class="clojure comments">logger</code> <code class="clojure comments">:fine</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.model" href="#one.sample.model" class="anchor"></a><h1 class="project-name">one.sample.model</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Contains client-side state, validators for input fields
 and functions which react to changes made to the input fields.</p>
</td><td class="codes"><div><div id="highlighter_428814" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;</code><code class="clojure symbol">one.sample.model</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.dispatch</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dispatch</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>An atom containing a map which is the application's current state.</p>
</td><td class="codes"><div><div id="highlighter_797619" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">state</code> <code class="clojure plain">(</code><code class="clojure functions">atom</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_19578" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">add-watch</code> <code class="clojure symbol">state</code> <code class="clojure constants">:state-change-key</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">k</code> <code class="clojure variable">r</code> <code class="clojure variable">o</code> <code class="clojure variable">n</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure constants">:state-change</code> <code class="clojure variable">n</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>An atom containing the state of the greeting form and
  each of its fields.</p>
</td><td class="codes"><div><div id="highlighter_498995" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure keyword meta">{</code><code class="clojure constants meta">:private</code> <code class="clojure value meta">true</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants meta">:doc</code> <code class="clojure keyword meta">}</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">greeting-form</code> <code class="clojure plain">(</code><code class="clojure functions">atom</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_326562" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">add-watch</code> <code class="clojure symbol">greeting-form</code> <code class="clojure constants">:form-change-key</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">k</code> <code class="clojure variable">r</code> <code class="clojure variable">o</code> <code class="clojure variable">n</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure constants">:form-change</code> <code class="clojure keyword">{</code><code class="clojure constants">:old</code> <code class="clojure variable">o</code> <code class="clojure constants">:new</code> <code class="clojure variable">n</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_961381" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code> <code class="clojure symbol">new-status</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure symbol">&amp;</code> <code class="clojure variable">args</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">vec</code> <code class="clojure variable">args</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_768282" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure symbol">error-status</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:error</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:error</code> <code class="clojure string">"Are you sure about that? Names must have at least two characters."</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_276030" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure symbol">editing-error-status</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing-error</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:error</code> <code class="clojure string">"Names must have at least two characters."</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_728752" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:empty</code> <code class="clojure constants">:focus</code> <code class="clojure constants">:empty</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_779990" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing</code> <code class="clojure constants">:finished</code> <code class="clojure constants">:empty</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:empty</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_984748" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing</code> <code class="clojure constants">:change</code> <code class="clojure constants">:empty</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_891261" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing</code> <code class="clojure constants">:change</code> <code class="clojure constants">:error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_519938" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing</code> <code class="clojure constants">:change</code> <code class="clojure constants">:valid</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing-valid</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_711547" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing</code> <code class="clojure constants">:finished</code> <code class="clojure constants">:error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">error-status</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_458326" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-valid</code> <code class="clojure constants">:change</code> <code class="clojure constants">:error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_768506" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-valid</code> <code class="clojure constants">:change</code> <code class="clojure constants">:valid</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing-valid</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_709723" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-valid</code> <code class="clojure constants">:finished</code> <code class="clojure constants">:valid</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:valid</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_75790" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:error</code> <code class="clojure constants">:focus</code> <code class="clojure constants">:error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">editing-error-status</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_17490" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-error</code> <code class="clojure constants">:change</code> <code class="clojure constants">:error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">editing-error-status</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_424630" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-error</code> <code class="clojure constants">:finished</code> <code class="clojure constants">:error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">error-status</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_24140" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-error</code> <code class="clojure constants">:change</code> <code class="clojure constants">:valid</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing-valid</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_21277" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-error</code> <code class="clojure constants">:change</code> <code class="clojure constants">:empty</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing-error</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_517723" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-error</code> <code class="clojure constants">:finished</code> <code class="clojure constants">:empty</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:empty</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_114607" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:valid</code> <code class="clojure constants">:focus</code> <code class="clojure constants">:valid</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:editing-valid</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_438144" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure keyword">[</code><code class="clojure constants">:valid</code> <code class="clojure constants">:finished</code> <code class="clojure constants">:empty</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">p</code> <code class="clojure symbol">e</code> <code class="clojure symbol">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure constants">:empty</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_559978" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">new-status</code> <code class="clojure constants">:default</code> <code class="clojure keyword">[</code><code class="clojure variable">p</code> <code class="clojure variable">e</code> <code class="clojure variable">f</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:status</code> <code class="clojure variable">p</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a form id and a value and returns a map
  with <code>:value</code>, <code>:status</code>, and <code>:error</code> keys. Status will be set to
  either <code>:valid</code> or <code>:error</code>. If there was an error, then there will be
  an error message associated with the <code>:error</code> key.</p>
</td><td class="codes"><div><div id="highlighter_457963" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code> <code class="clojure symbol">validate</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">id</code> <code class="clojure variable">_</code><code class="clojure keyword">]</code> <code class="clojure variable">id</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_609494" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">validate</code> <code class="clojure string">"name-input"</code> <code class="clojure keyword">[</code><code class="clojure variable">_</code> <code class="clojure variable">v</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">cond</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">count</code> <code class="clojure variable">v</code><code class="clojure plain">)</code> <code class="clojure value">0</code><code class="clojure plain">)</code> <code class="clojure constants">:empty</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">count</code> <code class="clojure variable">v</code><code class="clojure plain">)</code> <code class="clojure value">1</code><code class="clojure plain">)</code> <code class="clojure constants">:error</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:else</code> <code class="clojure constants">:valid</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Calculates the status of the whole form based on the status of each
  field. Retuns <code>:finished</code> or <code>:editing</code>.</p>
</td><td class="codes"><div><div id="highlighter_910117" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">form-status</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">every?</code> <code class="clojure plain">#(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure symbol">%</code> <code class="clojure constants">:valid</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure symbol">%</code> <code class="clojure constants">:editing-valid</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure constants">:status</code> <code class="clojure plain">(</code><code class="clojure functions">vals</code> <code class="clojure plain">(</code><code class="clojure functions">:fields</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:finished</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:editing</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a field-id and value. Validates the field and updates the
  greeting form atom.</p>
</td><td class="codes"><div><div id="highlighter_953841" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">set-field-value</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">field-id</code> <code class="clojure variable">type</code> <code class="clojure variable">value</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">greeting-form</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">old</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">field</code> <code class="clojure plain">(</code><code class="clojure functions">get</code> <code class="clojure plain">(</code><code class="clojure functions">:fields</code> <code class="clojure variable">old</code><code class="clojure plain">)</code> <code class="clojure variable">field-id</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">field-status</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure plain">(</code><code class="clojure functions">new-status</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">old</code> <code class="clojure constants">:fields</code> <code class="clojure variable">field-id</code> <code class="clojure constants">:status</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">type</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">validate</code> <code class="clojure variable">field-id</code> <code class="clojure variable">value</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:value</code> <code class="clojure variable">value</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">new</code> <code class="clojure plain">(</code><code class="clojure functions">assoc-in</code> <code class="clojure variable">old</code> <code class="clojure keyword">[</code><code class="clojure constants">:fields</code> <code class="clojure variable">field-id</code><code class="clojure keyword">]</code> <code class="clojure variable">field-status</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">new</code> <code class="clojure constants">:status</code> <code class="clojure plain">(</code><code class="clojure functions">form-status</code> <code class="clojure variable">new</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Update the form state for a given field to indicate that the form
  is still being edited.</p>
</td><td class="codes"><div><div id="highlighter_621775" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">set-editing</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">id</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">greeting-form</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">old</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">field-map</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">old</code> <code class="clojure constants">:fields</code> <code class="clojure variable">id</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">status</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:status</code> <code class="clojure variable">field-map</code><code class="clojure plain">)</code> <code class="clojure constants">:empty</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">field-status</code> <code class="clojure plain">(</code><code class="clojure functions">new-status</code> <code class="clojure variable">status</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:focus</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">status</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">old</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc-in</code> <code class="clojure keyword">[</code><code class="clojure constants">:fields</code> <code class="clojure variable">id</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">field-status</code> <code class="clojure constants">:value</code> <code class="clojure plain">(</code><code class="clojure functions">:value</code> <code class="clojure variable">field-map</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure constants">:status</code> <code class="clojure plain">(</code><code class="clojure functions">form-status</code> <code class="clojure variable">old</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_843548" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">e</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">e</code><code class="clojure plain">)</code> <code class="clojure constants">:field-finished</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">_</code> <code class="clojure variable">id</code><code class="clojure keyword">]</code> <code class="clojure variable">value</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-field-value</code> <code class="clojure variable">id</code> <code class="clojure constants">:finished</code> <code class="clojure variable">value</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_388842" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">e</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">e</code><code class="clojure plain">)</code> <code class="clojure constants">:field-changed</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">_</code> <code class="clojure variable">id</code><code class="clojure keyword">]</code> <code class="clojure variable">value</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-field-value</code> <code class="clojure variable">id</code> <code class="clojure constants">:change</code> <code class="clojure variable">value</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_242799" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">e</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">e</code><code class="clojure plain">)</code> <code class="clojure constants">:editing-field</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">_</code> <code class="clojure variable">id</code><code class="clojure keyword">]</code> <code class="clojure variable">_</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-editing</code> <code class="clojure variable">id</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_652073" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure keyword">#{</code><code class="clojure constants">:form-submit</code><code class="clojure keyword">}</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">t</code> <code class="clojure variable">d</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">form-data</code> <code class="clojure plain">@</code><code class="clojure symbol">greeting-form</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">:status</code> <code class="clojure variable">form-data</code><code class="clojure plain">)</code> <code class="clojure constants">:finished</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure constants">:greeting</code> <code class="clojure keyword">{</code><code class="clojure constants">:name</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">form-data</code> <code class="clojure constants">:fields</code> <code class="clojure string">"name-input"</code> <code class="clojure constants">:value</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.sample.view" href="#one.sample.view" class="anchor"></a><h1 class="project-name">one.sample.view</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Render the views for the application.</p>
</td><td class="codes"><div><div id="highlighter_499737" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.sample.view</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">domina</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">set-html!</code> <code class="clojure symbol">set-styles!</code> <code class="clojure symbol">styles</code> <code class="clojure symbol">by-id</code> <code class="clojure symbol">set-style!</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">by-class</code> <code class="clojure symbol">value</code> <code class="clojure symbol">set-value!</code> <code class="clojure symbol">set-text!</code> <code class="clojure symbol">nodes</code> <code class="clojure symbol">single-node</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">domina.xpath</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">xpath</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.browser.animation</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">play</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require-macros</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.sample.snippets</code> <code class="clojure constants">:as</code> <code class="clojure symbol">snippets</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure color3">goog.events.KeyCodes</code> <code class="clojure constants">:as</code> <code class="clojure symbol">key-codes</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure color3">goog.events.KeyHandler</code> <code class="clojure constants">:as</code> <code class="clojure symbol">key-handler</code><code class="clojure keyword">]</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.browser.event</code> <code class="clojure constants">:as</code> <code class="clojure symbol">event</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.dispatch</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dispatch</code><code class="clojure keyword">]</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.sample.animation</code> <code class="clojure constants">:as</code> <code class="clojure symbol">fx</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>A map which contains chunks of HTML which may be used
  when rendering views.</p>
</td><td class="codes"><div><div id="highlighter_629239" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">snippets</code> <code class="clojure plain">(</code><code class="clojure functions">snippets/snippets</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Render the submit button based on the current state of the
  form. The button is disabled while the user is editing the form and
  becomes enabled when the form is complete.</p>
</td><td class="codes"><div><div id="highlighter_114807" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure symbol">render-button</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">identity</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_137204" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-button</code> <code class="clojure constants">:default</code> <code class="clojure keyword">[</code><code class="clojure variable">_</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_342134" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-button</code> <code class="clojure keyword">[</code><code class="clojure constants">:finished</code> <code class="clojure constants">:editing</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure color3">_</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/disable-button</code> <code class="clojure string">"greet-button"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_475214" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-button</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing</code> <code class="clojure constants">:finished</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure color3">_</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/enable-button</code> <code class="clojure string">"greet-button"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Render a form field based on the current state transition. Form
  fields are validated as soon as they lose focus. There are six
  transitions and each one has its own animation.</p>
</td><td class="codes"><div><div id="highlighter_635885" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure symbol">render-form-field</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure constants">:transition</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_611350" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure constants">:default</code> <code class="clojure keyword">[</code><code class="clojure variable">_</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an element id for an input field and return the xpath
  string to the label for that field.</p>
</td><td class="codes"><div><div id="highlighter_249225" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">label-xpath</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">id</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"//label[@id='"</code> <code class="clojure variable">id</code> <code class="clojure string">"-label']/span"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_46294" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:empty</code> <code class="clojure constants">:editing</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/label-move-up</code> <code class="clojure plain">(</code><code class="clojure functions">label-xpath</code> <code class="clojure symbol">id</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_581772" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing</code> <code class="clojure constants">:empty</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/label-move-down</code> <code class="clojure plain">(</code><code class="clojure functions">label-xpath</code> <code class="clojure symbol">id</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_853712" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-valid</code> <code class="clojure constants">:valid</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/label-fade-out</code> <code class="clojure plain">(</code><code class="clojure functions">label-xpath</code> <code class="clojure symbol">id</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_453874" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:valid</code> <code class="clojure constants">:editing-valid</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure plain">(</code><code class="clojure functions">label-xpath</code> <code class="clojure symbol">id</code><code class="clojure plain">)</code> <code class="clojure symbol">fx/fade-in</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_699312" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing</code> <code class="clojure constants">:error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code> <code class="clojure symbol">error</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">error-element</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure symbol">id</code> <code class="clojure string">"-error"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-style!</code> <code class="clojure variable">error-element</code> <code class="clojure string">"opacity"</code> <code class="clojure string">"0"</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-html!</code> <code class="clojure variable">error-element</code> <code class="clojure symbol">error</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">error-element</code> <code class="clojure symbol">fx/fade-in</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an id and an error message and fades the old error message
  out and the new one in.</p>
</td><td class="codes"><div><div id="highlighter_242686" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">swap-error-messages</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">id</code> <code class="clojure variable">error</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">error-element</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure variable">id</code> <code class="clojure string">"-error"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">error-element</code> <code class="clojure symbol">fx/fade-out</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:name</code> <code class="clojure string">"fade out error"</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">error-element</code> <code class="clojure symbol">fx/fade-in</code> <code class="clojure keyword">{</code><code class="clojure constants">:before</code> <code class="clojure plain">#(</code><code class="clojure functions">set-html!</code> <code class="clojure variable">error-element</code> <code class="clojure variable">error</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_8570" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:error</code> <code class="clojure constants">:editing-error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code> <code class="clojure symbol">error</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap-error-messages</code> <code class="clojure symbol">id</code> <code class="clojure symbol">error</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_453747" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-error</code> <code class="clojure constants">:error</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code> <code class="clojure symbol">error</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap-error-messages</code> <code class="clojure symbol">id</code> <code class="clojure symbol">error</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_727178" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-error</code> <code class="clojure constants">:editing-valid</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">error-element</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure symbol">id</code> <code class="clojure string">"-error"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">error-element</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure symbol">fx/fade-out</code> <code class="clojure constants">:time</code> <code class="clojure value">200</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_608809" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render-form-field</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-error</code> <code class="clojure constants">:empty</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure symbol">id</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">error-element</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure symbol">id</code> <code class="clojure string">"-error"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">error-element</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure symbol">fx/fade-out</code> <code class="clojure constants">:time</code> <code class="clojure value">200</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/label-move-down</code> <code class="clojure plain">(</code><code class="clojure functions">label-xpath</code> <code class="clojure symbol">id</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a field-id and creates listeners for blur and focus events which will then fire
  <code>:field-changed</code> and <code>:editing-field</code> events.</p>
</td><td class="codes"><div><div id="highlighter_342307" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">add-input-event-listeners</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">field-id</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">field</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure variable">field-id</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">keyboard</code> <code class="clojure plain">(</code><code class="clojure color1">goog.events.KeyHandler.</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"form"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event/listen</code> <code class="clojure variable">field</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"blur"</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">#(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure keyword">[</code><code class="clojure constants">:field-finished</code> <code class="clojure variable">field-id</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">value</code> <code class="clojure variable">field</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event/listen</code> <code class="clojure variable">field</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"focus"</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">#(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure keyword">[</code><code class="clojure constants">:editing-field</code> <code class="clojure variable">field-id</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event/listen</code> <code class="clojure variable">field</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"keyup"</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">#(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure keyword">[</code><code class="clojure constants">:field-changed</code> <code class="clojure variable">field-id</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">value</code> <code class="clojure variable">field</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event/listen</code> <code class="clojure variable">keyboard</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"key"</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">e</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure color1">.-keyCode</code> <code class="clojure variable">e</code><code class="clojure plain">)</code> <code class="clojure color3">key-codes/ENTER</code><code class="clojure plain">)</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">do</code> <code class="clojure plain">(</code><code class="clojure color1">.blur</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"name-input"</code><code class="clojure plain">)</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure constants">:form-submit</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a map which represents the current state of the application
  and renders a view based on the value of the <code>:state</code> key.</p>
</td><td class="codes"><div><div id="highlighter_420202" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure symbol">render</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure constants">:state</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_503904" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render</code> <code class="clojure constants">:init</code> <code class="clojure keyword">[</code><code class="clojure variable">_</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/initialize-views</code> <code class="clojure plain">(</code><code class="clojure functions">:form</code> <code class="clojure symbol">snippets</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">:greeting</code> <code class="clojure symbol">snippets</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">add-input-event-listeners</code> <code class="clojure string">"name-input"</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event/listen</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"greet-button"</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"click"</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">#(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure constants">:greeting</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:name</code> <code class="clojure plain">(</code><code class="clojure functions">value</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"name-input"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_786508" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render</code> <code class="clojure constants">:form</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">state</code> <code class="clojure variable">error</code> <code class="clojure variable">name</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/show-form</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-value!</code> <code class="clojure plain">(</code><code class="clojure functions">by-id</code> <code class="clojure string">"name-input"</code><code class="clojure plain">)</code> <code class="clojure string">""</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispatch/fire</code> <code class="clojure keyword">[</code><code class="clojure constants">:field-finished</code> <code class="clojure string">"name-input"</code><code class="clojure keyword">]</code> <code class="clojure string">""</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_903666" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">render</code> <code class="clojure constants">:greeting</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">state</code> <code class="clojure variable">name</code> <code class="clojure variable">exists</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-text!</code> <code class="clojure plain">(</code><code class="clojure functions">single-node</code> <code class="clojure plain">(</code><code class="clojure functions">by-class</code> <code class="clojure string">"name"</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure variable">name</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">set-text!</code> <code class="clojure plain">(</code><code class="clojure functions">single-node</code> <code class="clojure plain">(</code><code class="clojure functions">by-class</code> <code class="clojure string">"again"</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure variable">exists</code> <code class="clojure string">"again"</code> <code class="clojure string">""</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fx/show-greeting</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_704209" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure keyword">#{</code><code class="clojure constants">:state-change</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">_</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">render</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a map of old and new form states, generate a map with <code>:id</code>,
  <code>:transition</code> and <code>:error</code> keys which can be passed to
  <code>render-form-field</code>.</p>
</td><td class="codes"><div><div id="highlighter_188322" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">form-fields-status</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure plain">#(</code><code class="clojure functions">hash-map</code> <code class="clojure constants">:id</code> <code class="clojure symbol">%</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:transition</code> <code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">m</code> <code class="clojure constants">:old</code> <code class="clojure constants">:fields</code> <code class="clojure symbol">%</code> <code class="clojure constants">:status</code><code class="clojure plain">)</code> <code class="clojure constants">:empty</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">m</code> <code class="clojure constants">:new</code> <code class="clojure constants">:fields</code> <code class="clojure symbol">%</code> <code class="clojure constants">:status</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:error</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">m</code> <code class="clojure constants">:new</code> <code class="clojure constants">:fields</code> <code class="clojure symbol">%</code> <code class="clojure constants">:error</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">keys</code> <code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">m</code> <code class="clojure constants">:new</code> <code class="clojure constants">:fields</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_343921" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">dispatch/react-to</code> <code class="clojure keyword">#{</code><code class="clojure constants">:form-change</code><code class="clojure keyword">}</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">_</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">s</code> <code class="clojure plain">(</code><code class="clojure functions">form-fields-status</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">render-form-field</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">render-button</code> <code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">m</code> <code class="clojure constants">:old</code> <code class="clojure constants">:status</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">-&gt;</code> <code class="clojure variable">m</code> <code class="clojure constants">:new</code> <code class="clojure constants">:status</code><code class="clojure plain">)</code><code class="clojure keyword">]</code> <code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.browser.animation" href="#one.browser.animation" class="anchor"></a><h1 class="project-name">one.browser.animation</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Provides support for basic animations. Allows effects to be
  represented as Clojure data.</p>
</td><td class="codes"><div><div id="highlighter_959929" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.browser.animation</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:use</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.color</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure symbol">bg-color</code> <code class="clojure symbol">rgb</code> <code class="clojure color3">IColorSource</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">one.core</code> <code class="clojure constants">:only</code> <code class="clojure plain">(</code><code class="clojure functions">start</code> <code class="clojure symbol">dispose</code> <code class="clojure symbol">get-style</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">goog.style</code> <code class="clojure constants">:as</code> <code class="clojure symbol">style</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.string</code> <code class="clojure constants">:as</code> <code class="clojure symbol">gstring</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure color3">goog.fx.AnimationQueue</code> <code class="clojure constants">:as</code> <code class="clojure symbol">queue</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.fx.easing</code> <code class="clojure constants">:as</code> <code class="clojure symbol">easing</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.fx.dom</code> <code class="clojure constants">:as</code> <code class="clojure symbol">anim</code><code class="clojure keyword">]</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure color3">goog.async.Delay</code> <code class="clojure constants">:as</code> <code class="clojure symbol">delay</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.browser.event</code> <code class="clojure constants">:as</code> <code class="clojure symbol">event</code><code class="clojure keyword">]</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.browser.dom</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dom</code><code class="clojure keyword">]</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">domina</code> <code class="clojure constants">:as</code> <code class="clojure symbol">d</code><code class="clojure keyword">]</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">domina.xpath</code> <code class="clojure constants">:as</code> <code class="clojure symbol">dx</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_214583" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:dynamic</code> <code class="clojure symbol">*default-time*</code> <code class="clojure value">1000</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts a keyword, string or element and returns an
  element. Strings are assumed to be xpath format.</p>
</td><td class="codes"><div><div id="highlighter_158523" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">get-element</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">e</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">cond</code> <code class="clojure plain">(</code><code class="clojure functions">keyword?</code> <code class="clojure variable">e</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">d/by-id</code> <code class="clojure plain">(</code><code class="clojure functions">name</code> <code class="clojure variable">e</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">string?</code> <code class="clojure variable">e</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure plain">(</code><code class="clojure functions">d/nodes</code> <code class="clojure plain">(</code><code class="clojure functions">dx/xpath</code> <code class="clojure variable">e</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:else</code> <code class="clojure variable">e</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_39445" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">IPosition</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">position</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Return the position of the passed object as a 2D array, `[X Y]`."</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_844458" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-protocol</code> <code class="clojure color3">IPosition</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">cljs.core.Vector</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">position</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Array</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">position</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Element</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">position</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">p</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure plain">(</code><code class="clojure functions">style/getPosition</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code> <code class="clojure constants">:keywordize-keys</code> <code class="clojure value">true</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">:x</code> <code class="clojure variable">p</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">:y</code> <code class="clojure variable">p</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_26845" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">IScroll</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">scroll</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Return the scroll position of an element as `[X Y]`."</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_64879" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-protocol</code> <code class="clojure color3">IScroll</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Number</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">scroll</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure value">0</code> <code class="clojure symbol">this</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">cljs.core.Vector</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">scroll</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Element</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">scroll</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure color1">.-scrollLeft</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure color1">.-scrollTop</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_47767" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">ISize</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Return the size of an element as `[W H]`."</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Return the width of an element."</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Return the height of an element."</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_769914" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-protocol</code> <code class="clojure color3">ISize</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Number</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code> <code class="clojure symbol">this</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">cljs.core.Vector</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">second</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Element</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">s</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure plain">(</code><code class="clojure functions">style/getSize</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:keywordize-keys</code> <code class="clojure value">true</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">:width</code> <code class="clojure variable">s</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">:height</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number19 index18 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number20 index19 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number21 index20 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_570277" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">IOpacity</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">opacity</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Return the elements current opacity."</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_761546" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-protocol</code> <code class="clojure color3">IOpacity</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/String</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">opacity</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">js/parseFloat</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Number</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">opacity</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Element</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">opacity</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">op</code> <code class="clojure plain">(</code><code class="clojure functions">style/getComputedStyle</code> <code class="clojure symbol">this</code> <code class="clojure string">"opacity"</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure variable">op</code> <code class="clojure string">""</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">opacity</code> <code class="clojure plain">(</code><code class="clojure functions">style/getOpacity</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">op</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_365482" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-type</code> <code class="clojure color3">goog.fx.AnimationQueue</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">one.core/Startable</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">start</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.play</code> <code class="clojure symbol">this</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">one.core/Disposable</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispose</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.dispose</code> <code class="clojure symbol">this</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_236730" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-type</code> <code class="clojure color3">goog.fx.dom.PredefinedEffect</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">one.core/Startable</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">start</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.play</code> <code class="clojure symbol">this</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">one.core/Disposable</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispose</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.dispose</code> <code class="clojure symbol">this</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">event/EventType</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event-types</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">into</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">map</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">k</code> <code class="clojure variable">v</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">keyword</code> <code class="clojure plain">(</code><code class="clojure color1">.</code> <code class="clojure variable">k</code> <code class="clojure plain">(</code><code class="clojure functions">toLowerCase</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">v</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">merge</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure color3">goog.fx.Animation.EventType</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Get the acceleration function associated with a given
  keyword. Implementing this as a multimethod allows developers to add new
  functions and still represent effects as data.</p>
</td><td class="codes"><div><div id="highlighter_136235" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure symbol">acceleration</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">identity</code> <code class="clojure constants">:default</code> <code class="clojure constants">:ease-out</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_404704" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">acceleration</code> <code class="clojure constants">:ease-out</code> <code class="clojure keyword">[</code><code class="clojure variable">name</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">easing/easeOut</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_551964" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">acceleration</code> <code class="clojure constants">:ease-in</code> <code class="clojure keyword">[</code><code class="clojure variable">name</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">easing/easeIn</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_897815" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">acceleration</code> <code class="clojure constants">:in-and-out</code> <code class="clojure keyword">[</code><code class="clojure variable">name</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">easing/inAndOut</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a map which represents an effect. Return the acceleration
  function or <code>nil</code>.</p>
</td><td class="codes"><div><div id="highlighter_252558" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">accel</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when-let</code> <code class="clojure keyword">[</code><code class="clojure variable">a</code> <code class="clojure plain">(</code><code class="clojure functions">:accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">fn?</code> <code class="clojure variable">a</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">a</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">acceleration</code> <code class="clojure variable">a</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_690335" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defrecord</code> <code class="clojure color3">Effect</code> <code class="clojure keyword">[</code><code class="clojure symbol">effect</code> <code class="clojure symbol">start</code> <code class="clojure symbol">end</code> <code class="clojure symbol">time</code> <code class="clojure symbol">accel</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">one.color.IColorSource</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">IOpacity</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">opacity</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">IPosition</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">position</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">ISize</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">IScroll</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">scroll</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Dispatch function for effect multimethods. Accepts an element and a
  map describing an effect and returns the effect name as a keyword.</p>
</td><td class="codes"><div><div id="highlighter_341051" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">effect-dispatch</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">_</code> <code class="clojure keyword">{</code><code class="clojure variable">effect</code> <code class="clojure constants">:effect</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an element and an effect map and returns a standardized
  effect map which must contain the four keys: <code>:start</code>, <code>:end</code>,
  <code>:time</code> and <code>:accel</code>.</p>

<p>  The element argument can either be an HTML element or an effect map
  which describes the previous effect.</p>
</td><td class="codes"><div><div id="highlighter_128182" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure symbol">standardize</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">effect-dispatch</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_676911" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:color</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:color</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an element and a map and returns an effect. The returned
  effect may be run or composed with other effects.</p>

<p>  Available effects include: <code>:color</code>, <code>:fade</code>, <code>:fade-in</code>, <code>:fade-out</code>,
  <code>:fade-in-and-show</code>, <code>:fade-out-and-hide</code>, <code>:slide</code>, <code>:swipe</code>, <code>:bg-color</code>,
  <code>:resize</code>, <code>:resize-width</code> and <code>:resize-height</code>.</p>
</td><td class="codes"><div><div id="highlighter_545162" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmulti</code> <code class="clojure symbol">effect</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">effect-dispatch</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_945220" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:color</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.ColorTransform.</code> <code class="clojure variable">element</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure plain">(</code><code class="clojure functions">rgb</code> <code class="clojure variable">start</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure plain">(</code><code class="clojure functions">rgb</code> <code class="clojure variable">end</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">time</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_92126" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Color effect examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">label</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">"//label[@id='name-input-label']/span"</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">label-color</code> <code class="clojure comments">(</code><code class="clojure comments">color</code> <code class="clojure comments">label</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">red</code> <code class="clojure comments">[</code><code class="clojure comments">255</code> <code class="clojure comments">0</code> <code class="clojure comments">0</code><code class="clojure comments">]</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">green</code> <code class="clojure comments">[</code><code class="clojure comments">0</code> <code class="clojure comments">255</code> <code class="clojure comments">0</code><code class="clojure comments">]</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">red</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">green</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">label-color</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">label</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">red</code><code class="clojure comments">}</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">green</code><code class="clojure comments">}</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">label-color</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_376152" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:fade</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:fade</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">opacity</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">opacity</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_581467" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:fade</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.Fade.</code> <code class="clojure variable">element</code> <code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_66325" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:fade-in</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:fade-in</code> <code class="clojure value">0</code> <code class="clojure value">1</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_800797" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:fade-in</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.FadeIn.</code> <code class="clojure variable">element</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_879330" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:fade-out</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:fade-out</code> <code class="clojure value">1</code> <code class="clojure value">0</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_279784" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:fade-out</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.FadeOut.</code> <code class="clojure variable">element</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_725602" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:fade-in-and-show</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:fade-in-and-show</code> <code class="clojure value">0</code> <code class="clojure value">1</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_509422" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:fade-in-and-show</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.FadeInAndShow.</code> <code class="clojure variable">element</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_818683" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:fade-out-and-hide</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:fade-out-and-hide</code> <code class="clojure value">1</code> <code class="clojure value">0</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_173082" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:fade-out-and-hide</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.FadeOutAndHide.</code> <code class="clojure variable">element</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_30522" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Fade effect examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">label</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">"//label[@id='name-input-label']/span"</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">title</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">"//div[@id='form']/h1"</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">title-opacity</code> <code class="clojure comments">(</code><code class="clojure comments">opacity</code> <code class="clojure comments">title</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">label-opacity</code> <code class="clojure comments">(</code><code class="clojure comments">opacity</code> <code class="clojure comments">label</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">0.2</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">title</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">label</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">label-opacity</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">title</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">title-opacity</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade-out</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade-in</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade-out-and-hide</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade-in-and-show</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">label</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">0</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">}</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">1</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; mix fade effects - cannot mix both fade-in-and-show and</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; fade-out-and-hide in the same animation.</code></div><div class="line number19 index18 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">apply</code> <code class="clojure comments">bind</code> <code class="clojure comments">label</code></div><div class="line number20 index19 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">map</code> <code class="clojure comments">#(</code><code class="clojure comments">assoc</code> <code class="clojure comments">%</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">)</code></div><div class="line number21 index20 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">[</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade-out</code><code class="clojure comments">}</code></div><div class="line number22 index21 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">1</code><code class="clojure comments">}</code></div><div class="line number23 index22 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">0</code><code class="clojure comments">}</code></div><div class="line number24 index23 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade-in</code><code class="clojure comments">}</code></div><div class="line number25 index24 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">0</code><code class="clojure comments">}</code></div><div class="line number26 index25 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:fade</code> <code class="clojure comments">:end</code> <code class="clojure comments">1</code><code class="clojure comments">}</code><code class="clojure comments">]</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_816154" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:bg-color</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">end</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:bg-color</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure variable">start</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure variable">end</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_305992" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:bg-color</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.BgColorTransform.</code> <code class="clojure variable">element</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure plain">(</code><code class="clojure functions">rgb</code> <code class="clojure variable">start</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure plain">(</code><code class="clojure functions">rgb</code> <code class="clojure variable">end</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">time</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_271821" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Background color effect examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">input</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">:name-input</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">red</code> <code class="clojure comments">[</code><code class="clojure comments">255</code> <code class="clojure comments">0</code> <code class="clojure comments">0</code><code class="clojure comments">]</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">green</code> <code class="clojure comments">[</code><code class="clojure comments">0</code> <code class="clojure comments">255</code> <code class="clojure comments">0</code><code class="clojure comments">]</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">input-bg-color</code> <code class="clojure comments">(</code><code class="clojure comments">bg-color</code> <code class="clojure comments">input</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">input-color</code> <code class="clojure comments">(</code><code class="clojure comments">color</code> <code class="clojure comments">input</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">input</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">red</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">input</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">green</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">input</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">input-bg-color</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">input</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">red</code><code class="clojure comments">}</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">green</code><code class="clojure comments">}</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">input-bg-color</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Calculate the end of a slide based on the start value and the
  passed <code>:left</code>, <code>:right</code>, <code>:up</code> and <code>:down</code> values.</p>
</td><td class="codes"><div><div id="highlighter_907207" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">calculate-slide-end</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">x</code> <code class="clojure variable">y</code><code class="clojure keyword">]</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">vector</code> <code class="clojure plain">(</code><code class="clojure functions">+</code> <code class="clojure plain">(</code><code class="clojure functions">-</code> <code class="clojure variable">x</code> <code class="clojure plain">(</code><code class="clojure functions">:left</code> <code class="clojure variable">m</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">:right</code> <code class="clojure variable">m</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">+</code> <code class="clojure plain">(</code><code class="clojure functions">-</code> <code class="clojure variable">y</code> <code class="clojure plain">(</code><code class="clojure functions">:up</code> <code class="clojure variable">m</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">:down</code> <code class="clojure variable">m</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_993467" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:slide</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure plain">(</code><code class="clojure functions">position</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">end</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">calculate-slide-end</code> <code class="clojure variable">start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:slide</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">start</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">end</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_30921" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:slide</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.Slide.</code> <code class="clojure variable">element</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure variable">start</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure variable">end</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">time</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_591391" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Slide effect examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">label</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">"//label[@id='name-input-label']/span"</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:up</code> <code class="clojure comments">40</code> <code class="clojure comments">:time</code> <code class="clojure comments">100</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:down</code> <code class="clojure comments">40</code> <code class="clojure comments">:time</code> <code class="clojure comments">100</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; Easing examples</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:up</code> <code class="clojure comments">200</code> <code class="clojure comments">:accel</code> <code class="clojure comments">:ease-out</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">label</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:down</code> <code class="clojure comments">200</code> <code class="clojure comments">:accel</code> <code class="clojure comments">:ease-in</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; slide up and then down</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">label</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:up</code> <code class="clojure comments">200</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code> <code class="clojure comments">:accel</code> <code class="clojure comments">:ease-out</code><code class="clojure comments">}</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:down</code> <code class="clojure comments">200</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code> <code class="clojure comments">:accel</code> <code class="clojure comments">:ease-in</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_644515" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:resize-height</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure plain">(</code><code class="clojure functions">when-let</code> <code class="clojure keyword">[</code><code class="clojure variable">h</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure variable">element</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure variable">h</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">end</code> <code class="clojure plain">(</code><code class="clojure functions">when-let</code> <code class="clojure keyword">[</code><code class="clojure variable">h</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure variable">element</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure variable">h</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:resize-height</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure variable">start</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure variable">end</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_408201" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:resize-height</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.ResizeHeight.</code> <code class="clojure variable">element</code> <code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure variable">start</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure variable">end</code><code class="clojure plain">)</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_613495" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:resize-width</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure plain">(</code><code class="clojure functions">when-let</code> <code class="clojure keyword">[</code><code class="clojure variable">w</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure variable">w</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">end</code> <code class="clojure plain">(</code><code class="clojure functions">when-let</code> <code class="clojure keyword">[</code><code class="clojure variable">w</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure variable">w</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">height</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:resize-width</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure variable">start</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure variable">end</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_921708" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:resize-width</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.ResizeWidth.</code> <code class="clojure variable">element</code> <code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure variable">start</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">width</code> <code class="clojure variable">end</code><code class="clojure plain">)</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_819520" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:resize</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:resize</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_367806" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:resize</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.Resize.</code> <code class="clojure variable">element</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure variable">start</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure variable">end</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">time</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_794582" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Resize examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">button</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">:greet-button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">button-size</code> <code class="clojure comments">(</code><code class="clojure comments">size</code> <code class="clojure comments">button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">button-height</code> <code class="clojure comments">(</code><code class="clojure comments">height</code> <code class="clojure comments">button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">button-width</code> <code class="clojure comments">(</code><code class="clojure comments">width</code> <code class="clojure comments">button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize</code> <code class="clojure comments">:end</code> <code class="clojure comments">[</code><code class="clojure comments">200</code> <code class="clojure comments">200</code><code class="clojure comments">]</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize</code> <code class="clojure comments">:end</code> <code class="clojure comments">button-size</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize-height</code> <code class="clojure comments">:end</code> <code class="clojure comments">200</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize-height</code> <code class="clojure comments">:end</code> <code class="clojure comments">button-height</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize-width</code> <code class="clojure comments">:end</code> <code class="clojure comments">200</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize-width</code> <code class="clojure comments">:end</code> <code class="clojure comments">button-width</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">button</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize</code> <code class="clojure comments">:end</code> <code class="clojure comments">[</code><code class="clojure comments">200</code> <code class="clojure comments">200</code><code class="clojure comments">]</code><code class="clojure comments">}</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize-height</code> <code class="clojure comments">:end</code> <code class="clojure comments">300</code><code class="clojure comments">}</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize-width</code> <code class="clojure comments">:end</code> <code class="clojure comments">300</code><code class="clojure comments">}</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize-height</code> <code class="clojure comments">:end</code> <code class="clojure comments">200</code><code class="clojure comments">}</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize-width</code> <code class="clojure comments">:end</code> <code class="clojure comments">200</code><code class="clojure comments">}</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize</code> <code class="clojure comments">:end</code> <code class="clojure comments">button-size</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_913360" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:scroll</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">end</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:scroll</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">scroll</code> <code class="clojure variable">start</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">scroll</code> <code class="clojure variable">end</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_804010" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:scroll</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.Scroll.</code> <code class="clojure variable">element</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure variable">start</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure variable">end</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">time</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_368050" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Scroll examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">doc</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">"//body"</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; Make the window small before trying this.</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">doc</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:scroll</code> <code class="clojure comments">:end</code> <code class="clojure comments">[</code><code class="clojure comments">500</code> <code class="clojure comments">500</code><code class="clojure comments">]</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">doc</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:scroll</code> <code class="clojure comments">:end</code> <code class="clojure comments">[</code><code class="clojure comments">0</code> <code class="clojure comments">0</code><code class="clojure comments">]</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">doc</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:scroll</code> <code class="clojure comments">:end</code> <code class="clojure comments">300</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">doc</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:scroll</code> <code class="clojure comments">:end</code> <code class="clojure comments">0</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">doc</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:scroll</code> <code class="clojure comments">:end</code> <code class="clojure comments">[</code><code class="clojure comments">500</code> <code class="clojure comments">500</code><code class="clojure comments">]</code><code class="clojure comments">}</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:scroll</code> <code class="clojure comments">:end</code> <code class="clojure comments">[</code><code class="clojure comments">0</code> <code class="clojure comments">0</code><code class="clojure comments">]</code><code class="clojure comments">}</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:scroll</code> <code class="clojure comments">:end</code> <code class="clojure comments">300</code><code class="clojure comments">}</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:scroll</code> <code class="clojure comments">:end</code> <code class="clojure comments">0</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_506299" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">standardize</code> <code class="clojure constants">:swipe</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:start</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure keyword">[</code><code class="clojure value">0</code> <code class="clojure value">0</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">end</code> <code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:end</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure variable">element</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Effect.</code> <code class="clojure constants">:swipe</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure variable">start</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">size</code> <code class="clojure variable">end</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">or</code> <code class="clojure plain">(</code><code class="clojure functions">:time</code> <code class="clojure variable">m</code><code class="clojure plain">)</code> <code class="clojure symbol">*default-time*</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">accel</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_145479" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defmethod</code> <code class="clojure symbol">effect</code> <code class="clojure constants">:swipe</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">start</code> <code class="clojure variable">end</code> <code class="clojure variable">time</code> <code class="clojure variable">accel</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure variable">element</code> <code class="clojure variable">m</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.fx.dom.Swipe.</code> <code class="clojure variable">element</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure variable">start</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">array</code> <code class="clojure variable">end</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">time</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">accel</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_587742" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Swipe examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">button</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">:greet-button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">button-size</code> <code class="clojure comments">(</code><code class="clojure comments">size</code> <code class="clojure comments">button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">style/setStyle</code> <code class="clojure comments">button</code> <code class="clojure comments">"position"</code> <code class="clojure comments">"absolute"</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:swipe</code> <code class="clojure comments">:start</code> <code class="clojure comments">[</code><code class="clojure comments">100</code> <code class="clojure comments">0</code><code class="clojure comments">]</code> <code class="clojure comments">:time</code> <code class="clojure comments">300</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:swipe</code> <code class="clojure comments">:start</code> <code class="clojure comments">[</code><code class="clojure comments">0</code> <code class="clojure comments">45</code><code class="clojure comments">]</code> <code class="clojure comments">:time</code> <code class="clojure comments">300</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">effect</code> <code class="clojure comments">button</code> <code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:swipe</code> <code class="clojure comments">:time</code> <code class="clojure comments">300</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">style/setStyle</code> <code class="clojure comments">button</code> <code class="clojure comments">"position"</code> <code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Cause the passed animations to run in parallel.</p>
</td><td class="codes"><div><div id="highlighter_511373" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">parallel</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">&amp;</code> <code class="clojure variable">effects</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">parallel</code> <code class="clojure plain">(</code><code class="clojure color1">goog.fx.AnimationParallelQueue.</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">effect</code> <code class="clojure variable">effects</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.add</code> <code class="clojure variable">parallel</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">parallel</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Cause the passed animations to be run in order.</p>
</td><td class="codes"><div><div id="highlighter_728495" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">serial</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">&amp;</code> <code class="clojure variable">effects</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">serial</code> <code class="clojure plain">(</code><code class="clojure color1">goog.fx.AnimationSerialQueue.</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">effect</code> <code class="clojure variable">effects</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.add</code> <code class="clojure variable">serial</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">serial</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Mapping of specific effects to a more general category of
  effect. For example, there are multiple size and opacity
  effects. Within a single animation, each type of effect should
  influence subsequent effects of the same type.</p>
</td><td class="codes"><div><div id="highlighter_87614" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure keyword meta">{</code><code class="clojure constants meta">:doc</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants meta">:private</code> <code class="clojure value meta">true</code><code class="clojure keyword meta">}</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">effect-types</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">{</code><code class="clojure constants">:color</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:color</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:fade</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:opacity</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:fade-in</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:opacity</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:fade-out</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:opacity</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:fade-in-and-show</code>&nbsp; <code class="clojure constants">:opacity</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:fade-out-and-hide</code> <code class="clojure constants">:opacity</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:bg-color</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:bg-color</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:slide</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:position</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:resize</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:size</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:resize-height</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:size</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:resize-width</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:size</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:scroll</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:scroll</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:swipe</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure constants">:size</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Standardize an effect within the scope of previous effects. Return
  a vector containing the new environment and the standardized
  effect. An effect may be a single map or a vector of maps</p>
</td><td class="codes"><div><div id="highlighter_96595" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">standardize-in-env</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">env</code> <code class="clojure variable">effect</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">vector?</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">coll</code> <code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure plain">#(</code><code class="clojure functions">standardize-in-env</code> <code class="clojure variable">element</code> <code class="clojure variable">env</code> <code class="clojure symbol">%</code><code class="clojure plain">)</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">merge</code> <code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure symbol">first</code> <code class="clojure variable">coll</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">vec</code> <code class="clojure plain">(</code><code class="clojure functions">map</code> <code class="clojure symbol">second</code> <code class="clojure variable">coll</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">effect-type</code> <code class="clojure plain">(</code><code class="clojure plain">(</code><code class="clojure functions">:effect</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code> <code class="clojure symbol">effect-types</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">effect</code> <code class="clojure plain">(</code><code class="clojure functions">standardize</code> <code class="clojure plain">(</code><code class="clojure functions">get</code> <code class="clojure variable">env</code> <code class="clojure variable">effect-type</code> <code class="clojure variable">element</code><code class="clojure plain">)</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">env</code> <code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">env</code> <code class="clojure variable">effect-type</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">env</code> <code class="clojure variable">effect</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an element and a list of effects and vectors of effects and
  returns the same structure with all effect map standardized. Missing
  values will be calculated based on previous effects.</p>
</td><td class="codes"><div><div id="highlighter_815288" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">standardize-all-effects</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure symbol">&amp;</code> <code class="clojure variable">effects</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">loop</code> <code class="clojure keyword">[</code><code class="clojure symbol">env</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">effects</code> <code class="clojure variable">effects</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">std-effects</code> <code class="clojure keyword">[</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">seq</code> <code class="clojure variable">effects</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">effect</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">effects</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">env</code> <code class="clojure variable">effect</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">standardize-in-env</code> <code class="clojure variable">element</code> <code class="clojure variable">env</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">recur</code> <code class="clojure variable">env</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">rest</code> <code class="clojure variable">effects</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">conj</code> <code class="clojure symbol">std-effects</code> <code class="clojure variable">effect</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure symbol">std-effects</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Bind effects to an element returning an animation. Accepts an HTML
  element and any number of effects. Effects can be Maps or a Vector
  of Maps. Each effect is run in order. Each effect within a Vector is
  run in parallel.</p>
</td><td class="codes"><div><div id="highlighter_307977" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">bind</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure symbol">&amp;</code> <code class="clojure variable">effects</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure plain">(</code><code class="clojure functions">get-element</code> <code class="clojure variable">element</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">effects</code> <code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">standardize-all-effects</code> <code class="clojure variable">element</code> <code class="clojure variable">effects</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">serial</code> <code class="clojure plain">(</code><code class="clojure color1">goog.fx.AnimationSerialQueue.</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">sequential-effect</code> <code class="clojure variable">effects</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">vector?</code> <code class="clojure variable">sequential-effect</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">parallel</code> <code class="clojure plain">(</code><code class="clojure color1">goog.fx.AnimationParallelQueue.</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure variable">parallel-effect</code> <code class="clojure variable">sequential-effect</code><code class="clojure keyword">]</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.add</code> <code class="clojure variable">parallel</code> <code class="clojure plain">(</code><code class="clojure functions">effect</code> <code class="clojure variable">element</code> <code class="clojure variable">parallel-effect</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.add</code> <code class="clojure variable">serial</code> <code class="clojure variable">parallel</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.add</code> <code class="clojure variable">serial</code> <code class="clojure plain">(</code><code class="clojure functions">effect</code> <code class="clojure variable">element</code> <code class="clojure variable">sequential-effect</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">serial</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_771170" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Bind examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">label-color</code> <code class="clojure comments">(</code><code class="clojure comments">color</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">"//label[@id='name-input-label']/span"</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">label</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">"//label[@id='name-input-label']/span"</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">input</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">:name-input</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">red</code> <code class="clojure comments">[</code><code class="clojure comments">255</code> <code class="clojure comments">0</code> <code class="clojure comments">0</code><code class="clojure comments">]</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">green</code> <code class="clojure comments">[</code><code class="clojure comments">0</code> <code class="clojure comments">255</code> <code class="clojure comments">0</code><code class="clojure comments">]</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">blue</code> <code class="clojure comments">[</code><code class="clojure comments">0</code> <code class="clojure comments">0</code> <code class="clojure comments">255</code><code class="clojure comments">]</code><code class="clojure comments">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">input-bg-color</code> <code class="clojure comments">(</code><code class="clojure comments">bg-color</code> <code class="clojure comments">input</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">input-color</code> <code class="clojure comments">(</code><code class="clojure comments">color</code> <code class="clojure comments">input</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">button</code> <code class="clojure comments">(</code><code class="clojure comments">get-element</code> <code class="clojure comments">:greet-button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">button-size</code> <code class="clojure comments">(</code><code class="clojure comments">size</code> <code class="clojure comments">button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">move-label</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">label</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">[</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:up</code> <code class="clojure comments">200</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">}</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">red</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">}</code><code class="clojure comments">]</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">[</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:down</code> <code class="clojure comments">200</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">}</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">label-color</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">}</code><code class="clojure comments">]</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">move-label</code><code class="clojure comments">)</code></div><div class="line number18 index17 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">background</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">input</code></div><div class="line number19 index18 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">red</code><code class="clojure comments">}</code></div><div class="line number20 index19 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">green</code><code class="clojure comments">}</code></div><div class="line number21 index20 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">blue</code><code class="clojure comments">}</code></div><div class="line number22 index21 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:bg-color</code> <code class="clojure comments">:end</code> <code class="clojure comments">input-bg-color</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number23 index22 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">background</code><code class="clojure comments">)</code></div><div class="line number24 index23 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; Serial and parallel animations on different elements</code></div><div class="line number25 index24 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">big-button</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">button</code></div><div class="line number26 index25 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize</code> <code class="clojure comments">:end</code> <code class="clojure comments">[</code><code class="clojure comments">200</code> <code class="clojure comments">200</code><code class="clojure comments">]</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">}</code></div><div class="line number27 index26 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:resize</code> <code class="clojure comments">:end</code> <code class="clojure comments">button-size</code> <code class="clojure comments">:time</code> <code class="clojure comments">2000</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number28 index27 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">big-button</code><code class="clojure comments">)</code></div><div class="line number29 index28 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">serial</code> <code class="clojure comments">move-label</code> <code class="clojure comments">background</code> <code class="clojure comments">big-button</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number30 index29 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">(</code><code class="clojure comments">parallel</code> <code class="clojure comments">move-label</code> <code class="clojure comments">background</code> <code class="clojure comments">big-button</code><code class="clojure comments">)</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_532374" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Events</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">;; You may listen for "begin" and "finish" events</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">label-up</code> <code class="clojure comments">(</code><code class="clojure comments">bind</code> <code class="clojure comments">"//label[@id='name-input-label']/span"</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:color</code> <code class="clojure comments">:end</code> <code class="clojure comments">"#53607b"</code> <code class="clojure comments">:time</code> <code class="clojure comments">200</code><code class="clojure comments">}</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">{</code><code class="clojure comments">:effect</code> <code class="clojure comments">:slide</code> <code class="clojure comments">:up</code> <code class="clojure comments">40</code> <code class="clojure comments">:time</code> <code class="clojure comments">200</code><code class="clojure comments">}</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">event/listen-once</code> <code class="clojure comments">label-up</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">"finish"</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure comments">#(</code><code class="clojure comments">js/alert</code> <code class="clojure comments">"Animation finished."</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">start</code> <code class="clojure comments">label-up</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Source of unique animation ids.</p>
</td><td class="codes"><div><div id="highlighter_236657" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure keyword meta">{</code><code class="clojure constants meta">:doc</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants meta">:private</code> <code class="clojure value meta">true</code><code class="clojure keyword meta">}</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">animation-id</code> <code class="clojure plain">(</code><code class="clojure functions">atom</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Data structure which supports running animations
  sequentially which have been started by the play and play-animation
  functions.</p>
</td><td class="codes"><div><div id="highlighter_593897" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure keyword meta">{</code><code class="clojure constants meta">:doc</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants meta">:private</code> <code class="clojure value meta">true</code><code class="clojure keyword meta">}</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">animation-queue</code> <code class="clojure plain">(</code><code class="clojure functions">atom</code> <code class="clojure keyword">{</code><code class="clojure constants">:runner</code> <code class="clojure value">nil</code> <code class="clojure constants">:running</code> <code class="clojure value">nil</code> <code class="clojure constants">:next</code> <code class="clojure keyword">[</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Add an animation to the <code>animation-queue</code>. If no runner is
  currently running animations then assign that job to the calling
  function by setting <code>:runner</code> to the passed <code>id</code> and putting the
  first animation to run under <code>:running</code>.</p>

<p>  If a runner is already running then add this animation to the
  vector under <code>:next</code>.</p>
</td><td class="codes"><div><div id="highlighter_545589" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">add-to-queue</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">queue</code> <code class="clojure variable">id</code> <code class="clojure variable">animations</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">new-next</code> <code class="clojure plain">(</code><code class="clojure functions">conj</code> <code class="clojure plain">(</code><code class="clojure functions">:next</code> <code class="clojure variable">queue</code><code class="clojure plain">)</code> <code class="clojure variable">animations</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">:runner</code> <code class="clojure variable">queue</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">queue</code> <code class="clojure constants">:next</code> <code class="clojure variable">new-next</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">queue</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:runner</code> <code class="clojure variable">id</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:running</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure variable">new-next</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:next</code> <code class="clojure plain">(</code><code class="clojure functions">vec</code> <code class="clojure plain">(</code><code class="clojure functions">rest</code> <code class="clojure variable">new-next</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_515923" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">add-to-queue</code> <code class="clojure comments">{</code><code class="clojure comments">:runner</code> <code class="clojure comments">nil</code> <code class="clojure comments">:running</code> <code class="clojure comments">nil</code> <code class="clojure comments">:next</code> <code class="clojure comments">[</code><code class="clojure comments">]</code><code class="clojure comments">}</code> <code class="clojure comments">2</code> <code class="clojure comments">{</code><code class="clojure comments">:e</code> <code class="clojure comments">1</code> <code class="clojure comments">:a</code> <code class="clojure comments">2</code><code class="clojure comments">}</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">add-to-queue</code> <code class="clojure comments">{</code><code class="clojure comments">:runner</code> <code class="clojure comments">nil</code> <code class="clojure comments">:running</code> <code class="clojure comments">nil</code> <code class="clojure comments">:next</code> <code class="clojure comments">[</code><code class="clojure comments">{</code><code class="clojure comments">:e</code> <code class="clojure comments">1</code> <code class="clojure comments">:a</code> <code class="clojure comments">2</code><code class="clojure comments">}</code><code class="clojure comments">]</code><code class="clojure comments">}</code> <code class="clojure comments">2</code> <code class="clojure comments">{</code><code class="clojure comments">:e</code> <code class="clojure comments">3</code> <code class="clojure comments">:a</code> <code class="clojure comments">4</code><code class="clojure comments">}</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">add-to-queue</code> <code class="clojure comments">{</code><code class="clojure comments">:runner</code> <code class="clojure comments">3</code> <code class="clojure comments">:running</code> <code class="clojure comments">nil</code> <code class="clojure comments">:next</code> <code class="clojure comments">[</code><code class="clojure comments">{</code><code class="clojure comments">:e</code> <code class="clojure comments">1</code> <code class="clojure comments">:a</code> <code class="clojure comments">2</code><code class="clojure comments">}</code><code class="clojure comments">]</code><code class="clojure comments">}</code> <code class="clojure comments">2</code> <code class="clojure comments">{</code><code class="clojure comments">:e</code> <code class="clojure comments">3</code> <code class="clojure comments">:a</code> <code class="clojure comments">4</code><code class="clojure comments">}</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Record that the runner with <code>id</code> has finished running the
  animation. If there are more animations to run, move the next
  animation under the running key and remove it from <code>:next</code>. The same
  runner will continue running animations.</p>

<p>  If there are no more animations to run, release the runner from duty
  by setting <code>:runner</code> to nil.</p>
</td><td class="codes"><div><div id="highlighter_500375" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">record-finished-animation</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">queue</code> <code class="clojure variable">id</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">empty?</code> <code class="clojure plain">(</code><code class="clojure functions">:next</code> <code class="clojure variable">queue</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">queue</code> <code class="clojure constants">:runner</code> <code class="clojure value">nil</code> <code class="clojure constants">:running</code> <code class="clojure value">nil</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">assoc</code> <code class="clojure variable">queue</code> <code class="clojure constants">:running</code> <code class="clojure plain">(</code><code class="clojure functions">first</code> <code class="clojure plain">(</code><code class="clojure functions">:next</code> <code class="clojure variable">queue</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure constants">:next</code> <code class="clojure plain">(</code><code class="clojure functions">vec</code> <code class="clojure plain">(</code><code class="clojure functions">rest</code> <code class="clojure plain">(</code><code class="clojure functions">:next</code> <code class="clojure variable">queue</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_825748" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">record-finished-animation</code> <code class="clojure comments">{</code><code class="clojure comments">:runner</code> <code class="clojure comments">2</code><code class="clojure plain">, </code><code class="clojure comments">:running</code> <code class="clojure comments">[</code><code class="clojure comments">{</code><code class="clojure comments">:e</code> <code class="clojure comments">1</code><code class="clojure plain">, </code><code class="clojure comments">:a</code> <code class="clojure comments">2</code><code class="clojure comments">}</code><code class="clojure comments">]</code><code class="clojure plain">, </code><code class="clojure comments">:next</code> <code class="clojure comments">[</code><code class="clojure comments">]</code><code class="clojure comments">}</code> <code class="clojure comments">2</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">record-finished-animation</code> <code class="clojure comments">{</code><code class="clojure comments">:runner</code> <code class="clojure comments">3</code><code class="clojure plain">, </code><code class="clojure comments">:running</code> <code class="clojure comments">nil</code><code class="clojure plain">, </code><code class="clojure comments">:next</code> <code class="clojure comments">[</code><code class="clojure comments">{</code><code class="clojure comments">:e</code> <code class="clojure comments">1</code><code class="clojure plain">, </code><code class="clojure comments">:a</code> <code class="clojure comments">2</code><code class="clojure comments">}</code> <code class="clojure comments">{</code><code class="clojure comments">:e</code> <code class="clojure comments">3</code><code class="clojure plain">, </code><code class="clojure comments">:a</code> <code class="clojure comments">4</code><code class="clojure comments">}</code><code class="clojure comments">]</code><code class="clojure comments">}</code> <code class="clojure comments">3</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_510223" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">declare</code> <code class="clojure symbol">play-animations</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>This function is called when the runner with <code>id</code> has finished
  running an animation. After updating the queue, if this runner is
  still the designated runner, then start running the next
  animation. If the animation which has completed has an associated
  <code>:after</code> function, run it.</p>
</td><td class="codes"><div><div id="highlighter_976321" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">animation-finished</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">id</code> <code class="clojure keyword">{</code><code class="clojure variable">after</code> <code class="clojure constants">:after</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">new-queue</code> <code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">animation-queue</code> <code class="clojure symbol">record-finished-animation</code> <code class="clojure variable">id</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure variable">after</code> <code class="clojure plain">(</code><code class="clojure functions">after</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">:runner</code> <code class="clojure variable">new-queue</code><code class="clojure plain">)</code> <code class="clojure variable">id</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play-animations</code> <code class="clojure variable">id</code> <code class="clojure variable">new-queue</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Create the animation to run.</p>
</td><td class="codes"><div><div id="highlighter_239949" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">make-animation</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">animation</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">cond</code> <code class="clojure variable">element</code> <code class="clojure plain">(</code><code class="clojure functions">bind</code> <code class="clojure variable">element</code> <code class="clojure variable">animation</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn?</code> <code class="clojure variable">animation</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">animation</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:else</code> <code class="clojure variable">animation</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Called by a function which has been assigned the task of running
  animations until there are no more to run. <code>id</code> is the runner
  id. <code>queue</code> is the value of animation-queue after it was last
  updated. Runs any <code>:before</code> function then runs the
  animation. Arranges for <code>animation-finished</code> to be called when the
  animation is complete.</p>

<p>  Implementation note: The delay is a hack to get around the fact that
  the <code>finish</code> event fires just before the animation has completed. The
  100 ms delay gives the finished animation just enough time to
  complete before the next animation is started.</p>
</td><td class="codes"><div><div id="highlighter_699639" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">play-animations</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">id</code> <code class="clojure variable">queue</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">animation-map</code> <code class="clojure plain">(</code><code class="clojure functions">:running</code> <code class="clojure variable">queue</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">animation</code> <code class="clojure plain">(</code><code class="clojure functions">make-animation</code> <code class="clojure variable">animation-map</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event/listen-once</code> <code class="clojure variable">animation</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure string">"finish"</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.start</code> <code class="clojure plain">(</code><code class="clojure color1">goog.async.Delay.</code> <code class="clojure plain">#(</code><code class="clojure functions">animation-finished</code> <code class="clojure variable">id</code> <code class="clojure variable">animation-map</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure value">100</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when-let</code> <code class="clojure keyword">[</code><code class="clojure variable">before</code> <code class="clojure plain">(</code><code class="clojure functions">:before</code> <code class="clojure variable">animation-map</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">before</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">start</code> <code class="clojure variable">animation</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an element and an animation and ensures that this animation
  will be run after all other animations that have been started by
  this function or by <code>play-animation</code>. An optional map may also be
  passed which may contain the keys <code>:before</code> and <code>:after</code>. Use the <code>:before</code>
  key to provide a function which will be called just before
  the animation starts. Use the <code>:after</code> key to provide a function
  which will be called after the aniamtion is finished.</p>

<p>  The <code>serial</code> function allows you to create animations which run in
  sequence. The <code>start</code> function will run these animations. If <code>start</code>
  is called to run an animation before a previous call to <code>start</code> has
  completed, the animations can conflict. This function should be used
  instead of <code>start</code> when you need to ensure that animations do not
  overlap.</p>
</td><td class="codes"><div><div id="highlighter_84958" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">play</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">animation</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure variable">element</code> <code class="clojure variable">animation</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">animation</code> <code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">name</code> <code class="clojure variable">after</code> <code class="clojure variable">before</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">id</code> <code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">animation-id</code> <code class="clojure symbol">inc</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">animation</code> <code class="clojure keyword">{</code><code class="clojure constants">:name</code> <code class="clojure variable">name</code> <code class="clojure constants">:id</code> <code class="clojure variable">id</code> <code class="clojure constants">:element</code> <code class="clojure variable">element</code> <code class="clojure constants">:animation</code> <code class="clojure variable">animation</code> <code class="clojure constants">:before</code> <code class="clojure variable">before</code> <code class="clojure constants">:after</code> <code class="clojure variable">after</code><code class="clojure keyword">}</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">queue</code> <code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">animation-queue</code> <code class="clojure symbol">add-to-queue</code> <code class="clojure variable">id</code> <code class="clojure variable">animation</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">:runner</code> <code class="clojure variable">queue</code><code class="clojure plain">)</code> <code class="clojure variable">id</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play-animations</code> <code class="clojure variable">id</code> <code class="clojure variable">queue</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Accepts an animation and an optional map and ensures that this
  animation will be run after all other animations that have been
  started by this function or by <code>play</code>. See documentation for <code>play</code>.</p>
</td><td class="codes"><div><div id="highlighter_796318" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">play-animation</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">animation</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play-animation</code> <code class="clojure variable">animation</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">animation</code> <code class="clojure variable">opts</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">play</code> <code class="clojure value">nil</code> <code class="clojure variable">animation</code> <code class="clojure variable">opts</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.browser.history" href="#one.browser.history" class="anchor"></a><h1 class="project-name">one.browser.history</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Supports working with <a href="http://closure-library.googlecode.com/svn/docs/namespace_goog_history.html">Google Closure's history management object</a>.</p>
</td><td class="codes"><div><div id="highlighter_532625" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.browser.history</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">clojure.browser.event</code> <code class="clojure constants">:as</code> <code class="clojure symbol">event</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure color3">goog.History</code> <code class="clojure constants">:as</code> <code class="clojure symbol">history</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure color3">goog.history.Html5History</code> <code class="clojure constants">:as</code> <code class="clojure symbol">history5</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_434062" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-type</code> <code class="clojure color3">goog.History</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">event/EventType</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event-types</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">into</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">map</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">k</code> <code class="clojure variable">v</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure plain">(</code><code class="clojure functions">keyword</code> <code class="clojure plain">(</code><code class="clojure color1">.</code> <code class="clojure variable">k</code> <code class="clojure plain">(</code><code class="clojure functions">toLowerCase</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">v</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure color3">goog.history.EventType</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Create a new history object in user visible mode. This allows users
  to, for example, hit the browser's back button without leaving the
  current page. The current history state is shown in the browser
  address bar as a document location fragment (the portion of the URL
  after the '#'). These addresses can be bookmarked, copied and pasted
  into another browser, and modified directly by the user like any
  other URL.</p>

<p>  Any changes to the location hash will call the passed callback
  function.</p>
</td><td class="codes"><div><div id="highlighter_710943" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">history</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">callback</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">h</code> <code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">history5/isSupported</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.history.Html5History.</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.History.</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">do</code> <code class="clojure plain">(</code><code class="clojure functions">event/listen</code> <code class="clojure variable">h</code> <code class="clojure string">"navigate"</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure variable">e</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">callback</code> <code class="clojure keyword">{</code><code class="clojure constants">:token</code> <code class="clojure plain">(</code><code class="clojure functions">keyword</code> <code class="clojure plain">(</code><code class="clojure color1">.-token</code> <code class="clojure variable">e</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:type</code> <code class="clojure plain">(</code><code class="clojure color1">.-type</code> <code class="clojure variable">e</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:navigation?</code> <code class="clojure plain">(</code><code class="clojure color1">.-isNavigation</code> <code class="clojure variable">e</code><code class="clojure plain">)</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.setEnabled</code> <code class="clojure variable">h</code> <code class="clojure value">true</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">h</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Sets the <code>history</code> state. The URL fragment will be set to the
  provided token.</p>
</td><td class="codes"><div><div id="highlighter_197820" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">set-token</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">history</code> <code class="clojure variable">token</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.setToken</code> <code class="clojure variable">history</code> <code class="clojure plain">(</code><code class="clojure functions">name</code> <code class="clojure variable">token</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.browser.remote" href="#one.browser.remote" class="anchor"></a><h1 class="project-name">one.browser.remote</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Make network requests.</p>
</td><td class="codes"><div><div id="highlighter_643200" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.browser.remote</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure color3">goog.net.XhrManager</code>&nbsp;&nbsp; <code class="clojure constants">:as</code> <code class="clojure symbol">manager</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_958095" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code> <code class="clojure preprocessor">^</code><code class="clojure constants meta">:private</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">*xhr-manager*</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.net.XhrManager.</code> <code class="clojure value">nil</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure value">nil</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure value">nil</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure value">0</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure value">5000</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_857366" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">success?</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure variable">status</code> <code class="clojure constants">:status</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">and</code> <code class="clojure plain">(</code><code class="clojure functions">&gt;=</code> <code class="clojure variable">status</code> <code class="clojure value">200</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">&lt;</code>&nbsp; <code class="clojure variable">status</code> <code class="clojure value">300</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_731085" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">redirect?</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure variable">status</code> <code class="clojure constants">:status</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">boolean</code> <code class="clojure plain">(</code><code class="clojure keyword">#{</code><code class="clojure value">301</code> <code class="clojure value">302</code> <code class="clojure value">303</code> <code class="clojure value">307</code><code class="clojure keyword">}</code> <code class="clojure variable">status</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_678321" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">error?</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure variable">status</code> <code class="clojure constants">:status</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">&gt;=</code> <code class="clojure variable">status</code> <code class="clojure value">400</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_553019" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">handle-response</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">on-success</code> <code class="clojure variable">on-error</code> <code class="clojure variable">e</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">response</code> <code class="clojure keyword">{</code><code class="clojure constants">:id</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="clojure plain">(</code><code class="clojure color1">.-id</code> <code class="clojure variable">e</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:body</code>&nbsp;&nbsp; <code class="clojure plain">(</code><code class="clojure color1">.</code> <code class="clojure color3">e/currentTarget</code> <code class="clojure plain">(</code><code class="clojure functions">getResponseText</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:status</code> <code class="clojure plain">(</code><code class="clojure color1">.</code> <code class="clojure color3">e/currentTarget</code> <code class="clojure plain">(</code><code class="clojure functions">getStatus</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:event</code>&nbsp; <code class="clojure variable">e</code><code class="clojure keyword">}</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">handler</code>&nbsp; <code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">success?</code> <code class="clojure variable">response</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">on-success</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">on-error</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">handler</code> <code class="clojure variable">response</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Asynchronously make a network request for the resource at url. If
  provided via the <code>:on-success</code> and <code>:on-error</code> keyword arguments, the
  appropriate one of <code>on-success</code> or <code>on-error</code> will be called on
  completion. They will be passed a map containing the keys <code>:id</code>,
  <code>:body</code>, <code>:status</code>, and <code>:event</code>. The entry for <code>:event</code> contains an
  instance of the <code>goog.net.XhrManager.Event</code>.</p>

<p>  Other allowable keyword arguments are <code>:method</code>, <code>:content</code>, <code>:headers</code>,
  <code>:priority</code>, and <code>:retries</code>. <code>:method</code> defaults to "GET" and <code>:retries</code>
  defaults to <code>0</code>.</p>
</td><td class="codes"><div><div id="highlighter_351024" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">request</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">id</code> <code class="clojure variable">url</code> <code class="clojure symbol">&amp;</code> <code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">method</code> <code class="clojure variable">content</code> <code class="clojure variable">headers</code> <code class="clojure variable">priority</code> <code class="clojure variable">retries</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">on-success</code> <code class="clojure variable">on-error</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:or</code>&nbsp;&nbsp; <code class="clojure keyword">{</code><code class="clojure variable">method</code>&nbsp;&nbsp; <code class="clojure string">"GET"</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">retries</code>&nbsp; <code class="clojure value">0</code><code class="clojure keyword">}</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">try</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.send</code> <code class="clojure symbol">*xhr-manager*</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">id</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">url</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">method</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">content</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure variable">headers</code> <code class="clojure plain">(</code><code class="clojure color1">.-strobj</code> <code class="clojure variable">headers</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">priority</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">partial</code> <code class="clojure symbol">handle-response</code> <code class="clojure variable">on-success</code> <code class="clojure variable">on-error</code><code class="clojure plain">)</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">retries</code><code class="clojure plain">)</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">catch</code> <code class="clojure color3">js/Error</code> <code class="clojure symbol">e</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure value">nil</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_517456" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">url</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">path</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure color1">.-origin</code> <code class="clojure plain">(</code><code class="clojure color1">.-location</code> <code class="clojure symbol">js/document</code><code class="clojure plain">)</code><code class="clojure plain">)</code> <code class="clojure variable">path</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.browser.repl-client" href="#one.browser.repl-client" class="anchor"></a><h1 class="project-name">one.browser.repl-client</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Contains the repl function which may be used to start a
  repl client in the browser.</p>
</td><td class="codes"><div><div id="highlighter_897026" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.browser.repl-client</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">goog.uri.utils</code> <code class="clojure constants">:as</code> <code class="clojure symbol">uri</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">clojure.browser.repl</code> <code class="clojure constants">:as</code> <code class="clojure symbol">repl</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Return a string which is the scheme and domain portion of the URL
  for the server from which this code was served.</p>
</td><td class="codes"><div><div id="highlighter_392544" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">server</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">location</code> <code class="clojure plain">(</code><code class="clojure color1">.toString</code> <code class="clojure symbol">window.location</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">uri/getScheme</code> <code class="clojure variable">location</code><code class="clojure plain">)</code> <code class="clojure string">"://"</code> <code class="clojure plain">(</code><code class="clojure functions">uri/getDomain</code> <code class="clojure variable">location</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Connects to a ClojureScript REPL running on localhost port 9000.</p>

<p>  This allows a browser-connected REPL to send JavaScript to the
  browser for evaluation. This function should be called from a script
  in the host HTML page.</p>
</td><td class="codes"><div><div id="highlighter_542512" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure preprocessor">^</code><code class="clojure constants">:export</code> <code class="clojure symbol">repl</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">repl/connect</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure plain">(</code><code class="clojure functions">server</code><code class="clojure plain">)</code> <code class="clojure string">":9000/repl"</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.color" href="#one.color" class="anchor"></a><h1 class="project-name">one.color</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Provide support for working with colors. Wraps Google
  Closure's color support.  The <code>goog.color</code> namespace provides support for
  additional color formats.</p>
</td><td class="codes"><div><div id="highlighter_87809" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.color</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">one.core</code> <code class="clojure constants">:as</code> <code class="clojure symbol">core</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.string</code> <code class="clojure constants">:as</code> <code class="clojure symbol">gstring</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.style</code> <code class="clojure constants">:as</code> <code class="clojure symbol">style</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.color</code> <code class="clojure constants">:as</code> <code class="clojure symbol">gcolor</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure symbol">goog.color.alpha</code> <code class="clojure constants">:as</code> <code class="clojure symbol">alpha</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_623494" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">IColor</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">rgb</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Returns a vector `[r g b]`."</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">rgba</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Returns a vector `[r g b a]`."</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">hex</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Returns a hex string for this color."</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">hex-rgba</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Returns a hex rgba string for this color."</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">alpha</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Returns the alpha for this color, a number in the range `[0 1]`."</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_947409" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defrecord</code> <code class="clojure color3">Color</code> <code class="clojure keyword">[</code><code class="clojure symbol">r</code> <code class="clojure symbol">g</code> <code class="clojure symbol">b</code> <code class="clojure symbol">a</code><code class="clojure keyword">]</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">IColor</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">rgb</code> <code class="clojure keyword">[</code><code class="clojure color3">_</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">r</code> <code class="clojure symbol">g</code> <code class="clojure symbol">b</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">rgba</code> <code class="clojure keyword">[</code><code class="clojure color3">_</code><code class="clojure keyword">]</code> <code class="clojure keyword">[</code><code class="clojure symbol">r</code> <code class="clojure symbol">g</code> <code class="clojure symbol">b</code> <code class="clojure symbol">a</code><code class="clojure keyword">]</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">hex</code> <code class="clojure keyword">[</code><code class="clojure color3">_</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">gcolor/rgbArrayToHex</code> <code class="clojure plain">(</code><code class="clojure functions">array</code> <code class="clojure symbol">r</code> <code class="clojure symbol">g</code> <code class="clojure symbol">b</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">hex-rgba</code> <code class="clojure keyword">[</code><code class="clojure color3">_</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">alpha/rgbaArrayToHex</code> <code class="clojure plain">(</code><code class="clojure functions">array</code> <code class="clojure symbol">r</code> <code class="clojure symbol">g</code> <code class="clojure symbol">b</code> <code class="clojure symbol">a</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">alpha</code> <code class="clojure keyword">[</code><code class="clojure color3">_</code><code class="clojure keyword">]</code> <code class="clojure symbol">a</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_976184" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn-</code> <code class="clojure symbol">make-color</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">r</code> <code class="clojure variable">g</code> <code class="clojure variable">b</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">make-color</code> <code class="clojure variable">r</code> <code class="clojure variable">g</code> <code class="clojure variable">b</code> <code class="clojure value">1</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">r</code> <code class="clojure variable">g</code> <code class="clojure variable">b</code> <code class="clojure variable">a</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">Color.</code> <code class="clojure variable">r</code> <code class="clojure variable">g</code> <code class="clojure variable">b</code> <code class="clojure variable">a</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_757558" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure comments">(</code><code class="clojure comments">comment</code> <code class="clojure comments">;; Color examples</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">def</code> <code class="clojure comments">red</code> <code class="clojure comments">(</code><code class="clojure comments">make-color</code> <code class="clojure comments">200</code> <code class="clojure comments">0</code> <code class="clojure comments">0</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">rgb</code> <code class="clojure comments">red</code><code class="clojure comments">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">rgba</code> <code class="clojure comments">red</code><code class="clojure comments">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">hex</code> <code class="clojure comments">red</code><code class="clojure comments">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">hex-rgba</code> <code class="clojure comments">red</code><code class="clojure comments">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure comments">(</code><code class="clojure comments">alpha</code> <code class="clojure comments">red</code><code class="clojure comments">)</code><code class="clojure comments">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_64388" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">IColorSource</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Get the color from the passed object. Return a `Color` object."</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Get the background color from the passed</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure string">object. Returns a `Color` object."</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_146808" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-protocol</code> <code class="clojure color3">IColorSource</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure value">nil</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">make-color</code> <code class="clojure value">0</code> <code class="clojure value">0</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">make-color</code> <code class="clojure value">0</code> <code class="clojure value">0</code> <code class="clojure value">0</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">Color</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">cljs.core.Vector</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">make-color</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">make-color</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Array</code></div><div class="line number16 index15 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">make-color</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number17 index16 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">apply</code> <code class="clojure symbol">make-color</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/String</code></div><div class="line number20 index19 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number21 index20 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure plain">(</code><code class="clojure functions">cond</code> <code class="clojure plain">(</code><code class="clojure functions">gstring/startsWith</code> <code class="clojure symbol">this</code> <code class="clojure string">"#"</code><code class="clojure plain">)</code></div><div class="line number22 index21 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">cond</code> <code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">count</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code> <code class="clojure value">7</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">gcolor/hexToRgb</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number23 index22 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">=</code> <code class="clojure plain">(</code><code class="clojure functions">count</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code> <code class="clojure value">9</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">alpha/hexToRgba</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number24 index23 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">gstring/startsWith</code> <code class="clojure symbol">this</code> <code class="clojure string">"rgba("</code><code class="clojure plain">)</code></div><div class="line number26 index25 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">alpha/parse</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">gstring/startsWith</code> <code class="clojure symbol">this</code> <code class="clojure string">"rgb("</code><code class="clojure plain">)</code> <code class="clojure plain">(</code><code class="clojure functions">gcolor/parseRgb</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number29 index28 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:keywordize-keys</code> <code class="clojure value">true</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number30 index29 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number31 index30 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number32 index31 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">cljs.core.ObjMap</code></div><div class="line number33 index32 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure plain">(</code><code class="clojure functions">:hex</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number34 index33 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number35 index34 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number36 index35 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">js/Element</code></div><div class="line number37 index36 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number38 index37 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure plain">(</code><code class="clojure functions">gcolor/parse</code> <code class="clojure plain">(</code><code class="clojure functions">core/get-style</code> <code class="clojure symbol">this</code> <code class="clojure string">"color"</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number39 index38 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:keywordize-keys</code> <code class="clojure value">true</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number40 index39 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">bg-color</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number41 index40 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">color</code> <code class="clojure plain">(</code><code class="clojure functions">js-&gt;clj</code> <code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">c</code> <code class="clojure plain">(</code><code class="clojure functions">style/getBackgroundColor</code> <code class="clojure symbol">this</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number42 index41 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">try</code></div><div class="line number43 index42 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">gcolor/parse</code> <code class="clojure variable">c</code><code class="clojure plain">)</code></div><div class="line number44 index43 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">catch</code> <code class="clojure color3">js/Error</code> <code class="clojure symbol">e</code> <code class="clojure plain">(</code><code class="clojure functions">alpha/parse</code> <code class="clojure variable">c</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number45 index44 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:keywordize-keys</code> <code class="clojure value">true</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.core" href="#one.core" class="anchor"></a><h1 class="project-name">one.core</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Core ClojureScript One library.</p>
</td><td class="codes"><div><div id="highlighter_40591" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.core</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure symbol">goog.style</code> <code class="clojure constants">:as</code> <code class="clojure symbol">style</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_983915" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">Startable</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">start</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_845891" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">Disposable</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">dispose</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Use alternate strategies to get around the fact that
  <code>goog.style.getComputedStyle</code> returns an empty string for IE8 and
  below.</p>
</td><td class="codes"><div><div id="highlighter_522153" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">get-style</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">element</code> <code class="clojure variable">style</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">some</code> <code class="clojure plain">#(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">v</code> <code class="clojure plain">(</code><code class="clojure functions">%</code><code class="clojure plain">)</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure functions">when</code> <code class="clojure plain">(</code><code class="clojure functions">not=</code> <code class="clojure string">""</code> <code class="clojure variable">v</code><code class="clojure plain">)</code> <code class="clojure variable">v</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure plain">#(</code><code class="clojure functions">style/getComputedStyle</code> <code class="clojure variable">element</code> <code class="clojure variable">style</code><code class="clojure plain">)</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">#(</code><code class="clojure functions">style/getStyle</code> <code class="clojure variable">element</code> <code class="clojure variable">style</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">#(</code><code class="clojure functions">aget</code> <code class="clojure plain">(</code><code class="clojure color1">.-currentStyle</code> <code class="clojure variable">element</code><code class="clojure plain">)</code> <code class="clojure variable">style</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">#(</code><code class="clojure functions">throw</code> <code class="clojure plain">(</code><code class="clojure color1">js/Error.</code> <code class="clojure plain">(</code><code class="clojure functions">str</code> <code class="clojure string">"Could not retrieve value for style "</code> <code class="clojure variable">style</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.dispatch" href="#one.dispatch" class="anchor"></a><h1 class="project-name">one.dispatch</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Event dispatching.</p>

<p>  Provides a way for code to react to events. Terminology:</p>

<ul>
<li><p>event-id: Identifies a class of events. Can be any Clojure value.</p></li>
<li><p>event-data: Parameterizes a particular event. Can be any Clojure
value.</p></li>
<li><p>reactor: A function that is invoked in response to an event
occurring.</p></li>
<li><p>reaction: A relationship between a set of events and a reactor.</p></li>
<li><p>event-pred: A function which takes an event ID and returns true or
false.</p>

<p>Reactors are associated with events via <code>react-to</code>. When events are
fired with an <code>event-id</code> and optional <code>event-data</code>, any reactors whose
<code>event-pred</code> returns true for the <code>event-id</code> are invoked.</p></li>
</ul>
</td><td class="codes"><div><div id="highlighter_541936" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.dispatch</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Stores the current reactions.</p>
</td><td class="codes"><div><div id="highlighter_562248" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">reactions</code> <code class="clojure plain">(</code><code class="clojure functions">atom</code> <code class="clojure keyword">{</code><code class="clojure keyword">}</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Cause the specified reactor to be invoked whenever an event that
  satisfies <code>event-pred</code> is fired. reactor is a function that accepts
  two arguments: <code>event-id</code> and <code>event-data</code>.</p>

<p>  Returns the reaction.</p>

<p>  The reactor will continue to be invoked until one of two things
  happens:</p>

<ol>
<li><p><code>delete-reaction</code> is called on this reaction.</p></li>
<li><p>The reaction occurs <code>max-count</code> times. If <code>max-count</code> is not
  specified, the reaction will continue to be invoked until deleted.</p>

<p>If <code>max-count</code> is specified, <code>delete-reaction</code> will be called
automatically when the reaction has occurred the specified number of
times.</p></li>
</ol>
</td><td class="codes"><div><div id="highlighter_754482" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">react-to</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">event-pred</code> <code class="clojure variable">reactor</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">react-to</code> <code class="clojure value">nil</code> <code class="clojure variable">event-pred</code> <code class="clojure variable">reactor</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">max-count</code> <code class="clojure variable">event-pred</code> <code class="clojure variable">reactor</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">reaction</code> <code class="clojure keyword">{</code><code class="clojure constants">:max-count</code> <code class="clojure variable">max-count</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:event-pred</code> <code class="clojure variable">event-pred</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:reactor</code> <code class="clojure variable">reactor</code><code class="clojure keyword">}</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">reactions</code> <code class="clojure symbol">assoc</code> <code class="clojure variable">reaction</code> <code class="clojure value">0</code><code class="clojure plain">)</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">reaction</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Delete a reaction. After calling this function, the specified
  reaction will no longer be invoked.</p>
</td><td class="codes"><div><div id="highlighter_297934" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">delete-reaction</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">reaction</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">reactions</code> <code class="clojure symbol">dissoc</code> <code class="clojure variable">reaction</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Raise an event to any reactors whose event-pred returns true for
  <code>event-id</code>. The <code>event-id</code> and <code>event-data</code>, if specified, are passed to
  the reactor.</p>
</td><td class="codes"><div><div id="highlighter_265152" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">fire</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">event-id</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">fire</code> <code class="clojure variable">event-id</code> <code class="clojure value">nil</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure keyword">[</code><code class="clojure variable">event-id</code> <code class="clojure variable">event-data</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure variable">matching-reactions</code> <code class="clojure plain">(</code><code class="clojure functions">filter</code> <code class="clojure plain">(</code><code class="clojure functions">fn</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure variable">event-pred</code> <code class="clojure constants">:event-pred</code><code class="clojure keyword">}</code> <code class="clojure variable">run-count</code><code class="clojure keyword">]</code><code class="clojure keyword">]</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">event-pred</code> <code class="clojure variable">event-id</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">@</code><code class="clojure symbol">reactions</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doseq</code> <code class="clojure keyword">[</code><code class="clojure keyword">[</code><code class="clojure variable">reaction</code> <code class="clojure variable">run-count</code><code class="clojure keyword">]</code> <code class="clojure variable">matching-reactions</code><code class="clojure keyword">]</code></div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">let</code> <code class="clojure keyword">[</code><code class="clojure keyword">{</code><code class="clojure constants">:keys</code> <code class="clojure keyword">[</code><code class="clojure variable">max-count</code> <code class="clojure variable">reactor</code><code class="clojure keyword">]</code><code class="clojure keyword">}</code> <code class="clojure variable">reaction</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure variable">run-count</code> <code class="clojure plain">(</code><code class="clojure functions">inc</code> <code class="clojure variable">run-count</code><code class="clojure plain">)</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">reactor</code> <code class="clojure variable">event-id</code> <code class="clojure variable">event-data</code><code class="clojure plain">)</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">if</code> <code class="clojure plain">(</code><code class="clojure functions">and</code> <code class="clojure variable">max-count</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">&lt;=</code> <code class="clojure variable">max-count</code> <code class="clojure variable">run-count</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">delete-reaction</code> <code class="clojure variable">reaction</code><code class="clojure plain">)</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">swap!</code> <code class="clojure symbol">reactions</code> <code class="clojure symbol">assoc</code> <code class="clojure variable">reaction</code> <code class="clojure variable">run-count</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr><tr><td class="docs"><div class="docs-header"><a name="one.logging" href="#one.logging" class="anchor"></a><h1 class="project-name">one.logging</h1><a href="#toc" class="toc-link">toc</a></div></td><td class="codes"></td></tr><tr><td class="docs"><p>Basic wrapper around <a href="http://closure-library.googlecode.com/svn/docs/class_goog_debug_Logger.html">Google Closure's logging API</a>.</p>

<p>  This library can be improved to support more of the features
  provided by Google Closure's logging.</p>
</td><td class="codes"><div><div id="highlighter_835774" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">ns</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">one.logging</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">:require</code> <code class="clojure keyword">[</code><code class="clojure color3">goog.debug.Console</code> <code class="clojure constants">:as</code> <code class="clojure symbol">console</code><code class="clojure keyword">]</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure color3">goog.debug.FancyWindow</code> <code class="clojure constants">:as</code> <code class="clojure symbol">fancy</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure color3">goog.debug.Logger</code> <code class="clojure constants">:as</code> <code class="clojure symbol">logger</code><code class="clojure keyword">]</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_990666" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defprotocol</code> <code class="clojure color3">ILogViewer</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">start-display</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Start displaying log messages in this viewer."</code><code class="clojure plain">)</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">stop-display</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code> <code class="clojure string">"Stop displaying log messages in this viewer."</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Maps log level keywords to <code>goog.debug.Logger.Levels</code>.</p>
</td><td class="codes"><div><div id="highlighter_539913" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">def</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure symbol">levels</code> <code class="clojure keyword">{</code><code class="clojure constants">:severe</code> <code class="clojure color3">goog.debug.Logger.Level.SEVERE</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:warning</code> <code class="clojure color3">goog.debug.Logger.Level.WARNING</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:info</code> <code class="clojure color3">goog.debug.Logger.Level.INFO</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:config</code> <code class="clojure color3">goog.debug.Logger.Level.CONFIG</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:fine</code> <code class="clojure color3">goog.debug.Logger.Level.FINE</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:finer</code> <code class="clojure color3">goog.debug.Logger.Level.FINER</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure constants">:finest</code> <code class="clojure color3">goog.debug.Logger.Level.FINEST</code><code class="clojure keyword">}</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a name, return an existing logger if one exists or create a
  new logger.</p>
</td><td class="codes"><div><div id="highlighter_365528" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">get-logger</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">name</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.debug.Logger/getLogger</code> <code class="clojure variable">name</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a logger and a message, write the message to the log with a
  logging level of <code>severe</code>.</p>
</td><td class="codes"><div><div id="highlighter_316426" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">severe</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.severe</code> <code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a logger and a message, write the message to the log with a
  logging level of <code>warning</code>.</p>
</td><td class="codes"><div><div id="highlighter_226366" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">warning</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.warning</code> <code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a logger and a message, write the message to the log with a
  logging level of <code>info</code>.</p>
</td><td class="codes"><div><div id="highlighter_22696" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">info</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.info</code> <code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a logger and a message, write the message to the log with a
  logging level of <code>config</code>.</p>
</td><td class="codes"><div><div id="highlighter_868378" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">config</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.config</code> <code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a logger and a message, write the message to the log with a
  logging level of <code>fine</code>.</p>
</td><td class="codes"><div><div id="highlighter_244647" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">fine</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.fine</code> <code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a logger and a message, write the message to the log with a
  logging level of <code>finer</code>.</p>
</td><td class="codes"><div><div id="highlighter_894324" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">finer</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.finer</code> <code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Given a logger and a message, write the message to the log with a
  logging level of <code>finest</code>.</p>
</td><td class="codes"><div><div id="highlighter_436681" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">finest</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure keyword">]</code> <code class="clojure plain">(</code><code class="clojure color1">.finest</code> <code class="clojure variable">logger</code> <code class="clojure variable">s</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Set the logging level of <code>logger</code> to <code>level</code>.</p>

<p>  The <code>level</code> argument must be a keyword.</p>
</td><td class="codes"><div><div id="highlighter_645079" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">set-level</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">logger</code> <code class="clojure variable">level</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.setLevel</code> <code class="clojure variable">logger</code> <code class="clojure plain">(</code><code class="clojure functions">get</code> <code class="clojure symbol">levels</code> <code class="clojure variable">level</code> <code class="clojure color3">goog.debug.Logger.Level.INFO</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs">
</td><td class="codes"><div><div id="highlighter_651983" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">extend-protocol</code> <code class="clojure color3">ILogViewer</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">goog.debug.Console</code></div><div class="line number4 index3 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">start-display</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number5 index4 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.setCapturing</code> <code class="clojure symbol">this</code> <code class="clojure value">true</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number6 index5 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">stop-display</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number7 index6 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.setCapturing</code> <code class="clojure symbol">this</code> <code class="clojure value">false</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number8 index7 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure color3">goog.debug.FancyWindow</code></div><div class="line number10 index9 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">start-display</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number11 index10 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">doto</code> <code class="clojure symbol">this</code></div><div class="line number12 index11 alt1"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.setEnabled</code> <code class="clojure value">true</code><code class="clojure plain">)</code></div><div class="line number13 index12 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.init</code> <code class="clojure value">(</code><code class="clojure value">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div><div class="line number14 index13 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure functions">stop-display</code> <code class="clojure keyword">[</code><code class="clojure symbol">this</code><code class="clojure keyword">]</code></div><div class="line number15 index14 alt2"><code class="clojure spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">.setCapturing</code> <code class="clojure symbol">this</code> <code class="clojure value">false</code><code class="clojure plain">)</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Returns a log viewer which will direct log messages to the
  browser's <code>console</code> window. Use the <code>start-display</code> and
  <code>stop-display</code> functions to start and stop printing log messages to
  the console.</p>
</td><td class="codes"><div><div id="highlighter_431855" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">console-output</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.debug.Console.</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="docs"><p>Returns a log viewer which will open a fancy logging window and
  direct log messages to it. Use the <code>start-display</code> and
  <code>stop-display</code> functions to start and stop printing log messages in
  this window.</p>
</td><td class="codes"><div><div id="highlighter_918697" class="syntaxhighlighter nogutter  clojure"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="clojure plain">(</code><code class="clojure functions">defn</code> <code class="clojure symbol">fancy-output</code></div><div class="line number2 index1 alt1"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure keyword">[</code><code class="clojure variable">name</code><code class="clojure keyword">]</code></div><div class="line number3 index2 alt2"><code class="clojure spaces">&nbsp;&nbsp;</code><code class="clojure plain">(</code><code class="clojure color1">goog.debug.FancyWindow.</code> <code class="clojure variable">name</code><code class="clojure plain">)</code><code class="clojure plain">)</code></div></div></td></tr></tbody></table></div></div></td></tr><tr><td class="spacer docs">&nbsp;</td><td class="codes"></td></tr></tbody></table><div class="footer">Generated by <a href="https://github.com/fogus/marginalia">Marginalia</a>.&nbsp;&nbsp;Syntax highlighting provided by Alex Gorbatchev's <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a></div><script type="text/javascript">SyntaxHighlighter.defaults['gutter'] = false;
       SyntaxHighlighter.all()</script>

</body></html>